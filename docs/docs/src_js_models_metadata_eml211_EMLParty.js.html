<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>MetacatUI Dev Docs: Source: src/js/models/metadata/eml211/EMLParty.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
    <link type="text/css" rel="stylesheet" href="/metacatui/assets/css/styles.css">
    <link type="text/css" rel="stylesheet" href="styles/style.css">
</head>

<body>

<nav id="nav">
    <a href="/">
      <div class="logo">
<svg class="cat" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="cat" class="svg-inline--fa fa-cat fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M290.59 192c-20.18 0-106.82 1.98-162.59 85.95V192c0-52.94-43.06-96-96-96-17.67 0-32 14.33-32 32s14.33 32 32 32c17.64 0 32 14.36 32 32v256c0 35.3 28.7 64 64 64h176c8.84 0 16-7.16 16-16v-16c0-17.67-14.33-32-32-32h-32l128-96v144c0 8.84 7.16 16 16 16h32c8.84 0 16-7.16 16-16V289.86c-10.29 2.67-20.89 4.54-32 4.54-61.81 0-113.52-44.05-125.41-102.4zM448 96h-64l-64-64v134.4c0 53.02 42.98 96 96 96s96-42.98 96-96V32l-64 64zm-72 80c-8.84 0-16-7.16-16-16s7.16-16 16-16 16 7.16 16 16-7.16 16-16 16zm80 0c-8.84 0-16-7.16-16-16s7.16-16 16-16 16 7.16 16 16-7.16 16-16 16z"></path></svg>

<svg width="459px" height="53px" viewBox="0 0 459 53" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g id="metacatui" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <path d="M16.492,52 C17.212,52 17.812,51.748 18.292,51.244 C18.772,50.74 19.012,50.128 19.012,49.408 L19.012,49.408 L18.94,22.912 L30.82,37.816 C31.204,38.344 31.72,38.764 32.368,39.076 C33.016,39.388 33.7,39.544 34.42,39.544 C35.908,39.544 37.132,38.896 38.092,37.6 L38.092,37.6 L49.684,22.912 L49.684,49.408 C49.684,50.128 49.96,50.74 50.512,51.244 C51.064,51.748 51.7,52 52.42,52 L52.42,52 L62.068,52 C62.788,52 63.388,51.748 63.868,51.244 C64.348,50.74 64.588,50.128 64.588,49.408 L64.588,49.408 L64.588,4.12 C64.588,3.448 64.336,2.86 63.832,2.356 C63.328,1.852 62.74,1.6 62.068,1.6 L62.068,1.6 L52.348,1.6 C51.388,1.6 50.56,1.648 49.864,1.744 C49.168,1.84 48.532,2.152 47.956,2.68 L47.956,2.68 L33.916,17.296 L20.524,2.608 C20.332,2.368 19.972,2.14 19.444,1.924 C18.916,1.708 18.412,1.6 17.932,1.6 L17.932,1.6 L6.772,1.6 C6.052,1.6 5.44,1.852 4.936,2.356 C4.432,2.86 4.18,3.448 4.18,4.12 L4.18,4.12 L4.18,49.408 C4.18,50.08 4.432,50.68 4.936,51.208 C5.44,51.736 6.052,52 6.772,52 L6.772,52 L16.492,52 Z M110.74,52 C111.556,52 112.264,51.676 112.864,51.028 C113.464,50.38 113.764,49.624 113.764,48.76 L113.764,48.76 L113.764,42.568 C113.764,41.608 113.464,40.828 112.864,40.228 C112.264,39.628 111.556,39.328 110.74,39.328 L110.74,39.328 L89.428,39.328 L89.428,32.92 L109.732,32.92 C110.5,32.92 111.184,32.596 111.784,31.948 C112.384,31.3 112.684,30.568 112.684,29.752 L112.684,29.752 L112.684,23.488 C112.684,22.576 112.384,21.82 111.784,21.22 C111.184,20.62 110.5,20.32 109.732,20.32 L109.732,20.32 L89.428,20.32 L89.428,14.488 L110.74,14.488 C111.508,14.488 112.204,14.164 112.828,13.516 C113.452,12.868 113.764,12.136 113.764,11.32 L113.764,11.32 L113.764,5.056 C113.764,4.144 113.464,3.388 112.864,2.788 C112.264,2.188 111.556,1.888 110.74,1.888 L110.74,1.888 L76.756,1.888 C75.94,1.888 75.232,2.188 74.632,2.788 C74.032,3.388 73.732,4.144 73.732,5.056 L73.732,5.056 L73.732,48.76 C73.732,49.624 74.032,50.38 74.632,51.028 C75.232,51.676 75.94,52 76.756,52 L76.756,52 L110.74,52 Z M147.604,52 C148.42,52 149.104,51.688 149.656,51.064 C150.208,50.44 150.484,49.672 150.484,48.76 L150.484,48.76 L150.484,16.216 L161.86,16.216 C162.676,16.216 163.396,15.904 164.02,15.28 C164.644,14.656 164.956,13.936 164.956,13.12 L164.956,13.12 L164.956,4.768 C164.956,4 164.644,3.316 164.02,2.716 C163.396,2.116 162.676,1.816 161.86,1.816 L161.86,1.816 L124.132,1.816 C123.22,1.816 122.464,2.104 121.864,2.68 C121.264,3.256 120.964,3.952 120.964,4.768 L120.964,4.768 L120.964,13.12 C120.964,13.936 121.264,14.656 121.864,15.28 C122.464,15.904 123.22,16.216 124.132,16.216 L124.132,16.216 L135.652,16.216 L135.148,48.832 C135.148,49.744 135.424,50.5 135.976,51.1 C136.528,51.7 137.212,52 138.028,52 L138.028,52 L147.604,52 Z M175.828,52 C176.836,52 177.676,51.82 178.348,51.46 C179.02,51.1 179.452,50.584 179.644,49.912 L179.644,49.912 L181.876,42.712 L197.932,42.712 L200.164,49.912 C200.356,50.584 200.8,51.1 201.496,51.46 C202.192,51.82 203.044,52 204.052,52 L204.052,52 L213.916,52 C215.836,51.712 216.796,50.704 216.796,48.976 C216.796,48.304 216.676,47.596 216.436,46.852 C216.196,46.108 216.052,45.616 216.004,45.376 L216.004,45.376 L199.876,4.84 C199.588,3.976 199.036,3.232 198.22,2.608 C197.404,1.984 196.372,1.648 195.124,1.6 L195.124,1.6 L184.756,1.6 C183.604,1.648 182.608,1.948 181.768,2.5 C180.928,3.052 180.292,3.832 179.86,4.84 L179.86,4.84 L163.876,45.376 C163.828,45.472 163.672,45.916 163.408,46.708 C163.144,47.5 163.012,48.304 163.012,49.12 C163.012,50.752 163.948,51.712 165.82,52 L165.82,52 L175.828,52 Z M195.34,30.544 L184.036,30.544 L189.652,13.624 L195.34,30.544 Z M245.38,53.08 C250.612,53.08 255.652,51.544 260.5,48.472 C261.22,47.944 261.58,47.296 261.58,46.528 C261.58,45.808 261.292,45.16 260.716,44.584 L260.716,44.584 L252.796,36.808 C252.364,36.376 251.836,36.16 251.212,36.16 C250.78,36.16 250.372,36.256 249.988,36.448 C248.356,37.12 246.796,37.456 245.308,37.456 C243.244,37.456 241.348,36.952 239.62,35.944 C237.892,34.936 236.512,33.58 235.48,31.876 C234.448,30.172 233.932,28.336 233.932,26.368 C233.932,24.352 234.436,22.504 235.444,20.824 C236.452,19.144 237.832,17.812 239.584,16.828 C241.336,15.844 243.244,15.352 245.308,15.352 C246.892,15.352 248.332,15.64 249.628,16.216 C250.012,16.408 250.444,16.504 250.924,16.504 C251.548,16.504 252.1,16.264 252.58,15.784 L252.58,15.784 L259.636,8.008 C260.164,7.384 260.428,6.76 260.428,6.136 C260.428,5.224 259.996,4.528 259.132,4.048 C254.86,1.552 250.276,0.304 245.38,0.304 C240.532,0.304 236.032,1.492 231.88,3.868 C227.728,6.244 224.44,9.448 222.016,13.48 C219.592,17.512 218.38,21.904 218.38,26.656 C218.38,31.408 219.592,35.812 222.016,39.868 C224.44,43.924 227.728,47.14 231.88,49.516 C236.032,51.892 240.532,53.08 245.38,53.08 Z M279.796,52 C280.804,52 281.644,51.82 282.316,51.46 C282.988,51.1 283.42,50.584 283.612,49.912 L283.612,49.912 L285.844,42.712 L301.9,42.712 L304.132,49.912 C304.324,50.584 304.768,51.1 305.464,51.46 C306.16,51.82 307.012,52 308.02,52 L308.02,52 L317.884,52 C319.804,51.712 320.764,50.704 320.764,48.976 C320.764,48.304 320.644,47.596 320.404,46.852 C320.164,46.108 320.02,45.616 319.972,45.376 L319.972,45.376 L303.844,4.84 C303.556,3.976 303.004,3.232 302.188,2.608 C301.372,1.984 300.34,1.648 299.092,1.6 L299.092,1.6 L288.724,1.6 C287.572,1.648 286.576,1.948 285.736,2.5 C284.896,3.052 284.26,3.832 283.828,4.84 L283.828,4.84 L267.844,45.376 C267.796,45.472 267.64,45.916 267.376,46.708 C267.112,47.5 266.98,48.304 266.98,49.12 C266.98,50.752 267.916,51.712 269.788,52 L269.788,52 L279.796,52 Z M299.308,30.544 L288.004,30.544 L293.62,13.624 L299.308,30.544 Z M352.588,52 C353.404,52 354.088,51.688 354.64,51.064 C355.192,50.44 355.468,49.672 355.468,48.76 L355.468,48.76 L355.468,16.216 L366.844,16.216 C367.66,16.216 368.38,15.904 369.004,15.28 C369.628,14.656 369.94,13.936 369.94,13.12 L369.94,13.12 L369.94,4.768 C369.94,4 369.628,3.316 369.004,2.716 C368.38,2.116 367.66,1.816 366.844,1.816 L366.844,1.816 L329.116,1.816 C328.204,1.816 327.448,2.104 326.848,2.68 C326.248,3.256 325.948,3.952 325.948,4.768 L325.948,4.768 L325.948,13.12 C325.948,13.936 326.248,14.656 326.848,15.28 C327.448,15.904 328.204,16.216 329.116,16.216 L329.116,16.216 L340.636,16.216 L340.132,48.832 C340.132,49.744 340.408,50.5 340.96,51.1 C341.512,51.7 342.196,52 343.012,52 L343.012,52 L352.588,52 Z M402.052,52.792 C408.1,52.792 412.912,51.628 416.488,49.3 C420.064,46.972 422.536,44.068 423.904,40.588 C425.272,37.108 425.932,33.424 425.884,29.536 C425.884,29.5309474 425.883967,29.5237673 425.8839,29.5144598 L425.883102,29.4330859 C425.879911,29.1480111 425.868211,28.3183158 425.848,26.944 C425.8294,25.6792 425.818008,22.91524 425.813823,18.65212 L425.813103,17.80828 C425.812997,17.66452 425.8129,17.5192 425.81281,17.37232 L425.812,3.904 C425.86,3.184 425.632,2.62 425.128,2.212 C424.624,1.804 423.916,1.6 423.004,1.6 L423.004,1.6 L413.428,1.6 C412.612,1.6 411.904,1.828 411.304,2.284 C410.704,2.74 410.404,3.28 410.404,3.904 L410.404,3.904 L410.26,27.808 C410.26,34.144 407.476,37.312 401.908,37.312 C399.076,37.312 396.832,36.412 395.176,34.612 C393.52,32.812 392.668,30.352 392.62,27.232 L392.62,27.232 L392.332,3.76 C392.332,3.088 392.068,2.56 391.54,2.176 C391.012,1.792 390.268,1.6 389.308,1.6 L389.308,1.6 L379.876,1.6 C378.244,1.6 377.428,2.32 377.428,3.76 L377.428,3.76 L377.5,28.816 C377.5,33.04 378.376,36.964 380.128,40.588 C381.88,44.212 384.592,47.152 388.264,49.408 C391.936,51.664 396.532,52.792 402.052,52.792 Z M449.284,52.144 C450.148,52.144 450.88,51.844 451.48,51.244 C452.08,50.644 452.38,49.84 452.38,48.832 L452.38,48.832 L452.38,4.912 C452.38,4 452.08,3.22 451.48,2.572 C450.88,1.924 450.148,1.6 449.284,1.6 L449.284,1.6 L439.42,1.6 C438.46,1.6 437.692,1.924 437.116,2.572 C436.54,3.22 436.252,4 436.252,4.912 L436.252,4.912 L436.252,48.832 C436.252,49.84 436.54,50.644 437.116,51.244 C437.692,51.844 438.46,52.144 439.42,52.144 L439.42,52.144 L449.284,52.144 Z" id="metacatui" fill="#FCBF49" fill-rule="nonzero"></path>
    </g>
</svg>
</logo>

    </a>
    <h3>Namespaces</h3><ul><li><a href="AppConfig.html">AppConfig</a></li><li><a href="MapConfig.html">MapConfig</a></li><li><a href="MetacatUI.html">MetacatUI</a></li><li><a href="Utilities.html">Utilities</a></li></ul><h3>Classes</h3><ul><li class='category-heading' data-category='Collections'>Collections</li><li><a href="AccessPolicy.html">AccessPolicy</a></li><li><a href="Citations.html">Citations</a></li><li><a href="DataPackage.html">DataPackage</a></li><li><a href="Filters.html">Filters</a></li><li><a href="ObjectFormats.html">ObjectFormats</a></li><li><a href="QualityReport.html">QualityReport</a></li><li><a href="SolrResults.html">SolrResults</a></li><li><a href="Units.html">Units</a></li><li><a href="UserGroup.html">UserGroup</a></li><li class='category-heading' data-category='Collections/Bookkeeper'>Collections/Bookkeeper</li><li><a href="Quotas.html">Quotas</a></li><li><a href="Usages.html">Usages</a></li><li class='category-heading' data-category='Collections/Maps'>Collections/Maps</li><li><a href="AssetColors.html">AssetColors</a></li><li><a href="Features.html">Features</a></li><li><a href="MapAssets.html">MapAssets</a></li><li><a href="VectorFilters.html">VectorFilters</a></li><li class='category-heading' data-category='Collections/QueryFields'>Collections/QueryFields</li><li><a href="QueryFields.html">QueryFields</a></li><li class='category-heading' data-category='Models'>Models</li><li><a href="AccessRule.html">AccessRule</a></li><li><a href="AppModel.html">AppModel</a></li><li><a href="Citation.html">Citation</a></li><li><a href="CollectionModel.html">CollectionModel</a></li><li><a href="DataONEObject.html">DataONEObject</a></li><li><a href="LookupModel.html">LookupModel</a></li><li><a href="Map.html">Map</a></li><li><a href="Metrics.html">Metrics</a></li><li><a href="QualityCheck.html">QualityCheck</a></li><li><a href="Search.html">Search</a></li><li><a href="SolrResult.html">SolrResult</a></li><li><a href="Stats.html">Stats</a></li><li class='category-heading' data-category='Models/Bookkeeper'>Models/Bookkeeper</li><li><a href="Quota.html">Quota</a></li><li><a href="Subscription.html">Subscription</a></li><li><a href="Usage.html">Usage</a></li><li class='category-heading' data-category='Models/Filters'>Models/Filters</li><li><a href="BooleanFilter.html">BooleanFilter</a></li><li><a href="ChoiceFilter.html">ChoiceFilter</a></li><li><a href="DateFilter.html">DateFilter</a></li><li><a href="Filter.html">Filter</a></li><li><a href="FilterGroup.html">FilterGroup</a></li><li><a href="NumericFilter.html">NumericFilter</a></li><li><a href="SpatialFilter.html">SpatialFilter</a></li><li><a href="ToggleFilter.html">ToggleFilter</a></li><li class='category-heading' data-category='Models/Formats'>Models/Formats</li><li><a href="ObjectFormat.html">ObjectFormat</a></li><li class='category-heading' data-category='Models/Maps'>Models/Maps</li><li><a href="AssetColor.html">AssetColor</a></li><li><a href="AssetColorPalette.html">AssetColorPalette</a></li><li><a href="Feature.html">Feature</a></li><li><a href="MapModel.html">MapModel</a></li><li><a href="VectorFilter.html">VectorFilter</a></li><li class='category-heading' data-category='Models/Maps/Assets'>Models/Maps/Assets</li><li><a href="Cesium3DTileset.html">Cesium3DTileset</a></li><li><a href="CesiumImagery.html">CesiumImagery</a></li><li><a href="CesiumTerrain.html">CesiumTerrain</a></li><li><a href="Geohash.html">Geohash</a></li><li><a href="MapAsset.html">MapAsset</a></li><li class='category-heading' data-category='Models/Metadata'>Models/Metadata</li><li><a href="ScienceMetadata.html">ScienceMetadata</a></li><li class='category-heading' data-category='Models/Metadata/EML211'>Models/Metadata/EML211</li><li><a href="EML211.html">EML211</a></li><li><a href="EMLAttribute.html">EMLAttribute</a></li><li><a href="EMLDataTable.html">EMLDataTable</a></li><li><a href="EMLEntity.html">EMLEntity</a></li><li><a href="EMLGeoCoverage.html">EMLGeoCoverage</a></li><li><a href="EMLMeasurementScale.html">EMLMeasurementScale</a></li><li><a href="EMLNonNumericDomain.html">EMLNonNumericDomain</a></li><li><a href="EMLNumericDomain.html">EMLNumericDomain</a></li><li><a href="EMLOtherEntity.html">EMLOtherEntity</a></li><li><a href="EMLParty.html">EMLParty</a></li><li><a href="EMLTemporalCoverage.html">EMLTemporalCoverage</a></li><li><a href="EMLUnit.html">EMLUnit</a></li><li class='category-heading' data-category='Models/Metadata/EML220'>Models/Metadata/EML220</li><li><a href="EMLText.html">EMLText</a></li><li class='category-heading' data-category='Models/Portals'>Models/Portals</li><li><a href="PortalImage.html">PortalImage</a></li><li><a href="PortalModel.html">PortalModel</a></li><li><a href="PortalSectionModel.html">PortalSectionModel</a></li><li class='category-heading' data-category='Models/QueryFields'>Models/QueryFields</li><li><a href="QueryField.html">QueryField</a></li><li class='category-heading' data-category='Router'>Router</li><li><a href="UIRouter.html">UIRouter</a></li><li class='category-heading' data-category='Views'>Views</li><li><a href="AccessPolicyView.html">AccessPolicyView</a></li><li><a href="AccessRuleView.html">AccessRuleView</a></li><li><a href="AnnotationView.html">AnnotationView</a></li><li><a href="AppView.html">AppView</a></li><li><a href="CitationListView.html">CitationListView</a></li><li><a href="ColorPaletteView.html">ColorPaletteView</a></li><li><a href="DataCatalogViewWithFilters.html">DataCatalogViewWithFilters</a></li><li><a href="DataItemView.html">DataItemView</a></li><li><a href="DataPackageView.html">DataPackageView</a></li><li><a href="DraftsView.html">DraftsView</a></li><li><a href="EditCollectionView.html">EditCollectionView</a></li><li><a href="EditorView.html">EditorView</a></li><li><a href="GroupListView.html">GroupListView</a></li><li><a href="ImageUploaderView.html">ImageUploaderView</a></li><li><a href="MarkdownEditorView.html">MarkdownEditorView</a></li><li><a href="MarkdownView.html">MarkdownView</a></li><li><a href="MdqRunView.html">MdqRunView</a></li><li><a href="MetadataView.html">MetadataView</a></li><li><a href="MetricModalView.html">MetricModalView</a></li><li><a href="MetricsChartView.html">MetricsChartView</a></li><li><a href="MetricView.html">MetricView</a></li><li><a href="NavbarView.html">NavbarView</a></li><li><a href="RegisterCitationView.html">RegisterCitationView</a></li><li><a href="SignInView.html">SignInView</a></li><li><a href="TableEditorView.html">TableEditorView</a></li><li><a href="TOCView.html">TOCView</a></li><li><a href="UserView.html">UserView</a></li><li class='category-heading' data-category='Views/Filters'>Views/Filters</li><li><a href="BooleanFilterView.html">BooleanFilterView</a></li><li><a href="ChoiceFilterView.html">ChoiceFilterView</a></li><li><a href="DateFilterView.html">DateFilterView</a></li><li><a href="FilterEditorView.html">FilterEditorView</a></li><li><a href="FilterGroupsView.html">FilterGroupsView</a></li><li><a href="FilterGroupView.html">FilterGroupView</a></li><li><a href="FilterView.html">FilterView</a></li><li><a href="NumericFilterView.html">NumericFilterView</a></li><li><a href="ToggleFilterView.html">ToggleFilterView</a></li><li class='category-heading' data-category='Views/Maps'>Views/Maps</li><li><a href="CesiumWidgetView.html">CesiumWidgetView</a></li><li><a href="FeatureInfoView.html">FeatureInfoView</a></li><li><a href="LayerDetailsView.html">LayerDetailsView</a></li><li><a href="LayerDetailView.html">LayerDetailView</a></li><li><a href="LayerInfoView.html">LayerInfoView</a></li><li><a href="LayerItemView.html">LayerItemView</a></li><li><a href="LayerListView.html">LayerListView</a></li><li><a href="LayerNavigationView.html">LayerNavigationView</a></li><li><a href="LayerOpacityView.html">LayerOpacityView</a></li><li><a href="LegendView.html">LegendView</a></li><li><a href="MapView.html">MapView</a></li><li><a href="ScaleBarView.html">ScaleBarView</a></li><li><a href="ToolbarView.html">ToolbarView</a></li><li class='category-heading' data-category='Views/Metadata'>Views/Metadata</li><li><a href="EML211EditorView.html">EML211EditorView</a></li><li><a href="EMLAttributeView.html">EMLAttributeView</a></li><li><a href="EMLEntityView.html">EMLEntityView</a></li><li><a href="EMlGeoCoverageView.html">EMlGeoCoverageView</a></li><li><a href="EMLMeasurementScaleView.html">EMLMeasurementScaleView</a></li><li><a href="EMLMeasurementTypeView.html">EMLMeasurementTypeView</a></li><li><a href="EMLMethodsView.html">EMLMethodsView</a></li><li><a href="EMLOtherEntityView.html">EMLOtherEntityView</a></li><li><a href="EMLPartyView.html">EMLPartyView</a></li><li><a href="EMLTempCoverageView.html">EMLTempCoverageView</a></li><li><a href="EMLView.html">EMLView</a></li><li><a href="ScienceMetadataView.html">ScienceMetadataView</a></li><li class='category-heading' data-category='Views/Portals'>Views/Portals</li><li><a href="PortalDataView.html">PortalDataView</a></li><li><a href="PortalHeaderView.html">PortalHeaderView</a></li><li><a href="PortalListView.html">PortalListView</a></li><li><a href="PortalLogosView.html">PortalLogosView</a></li><li><a href="PortalMembersView.html">PortalMembersView</a></li><li><a href="PortalSectionView.html">PortalSectionView</a></li><li><a href="PortalsSearchView.html">PortalsSearchView</a></li><li><a href="PortalUsagesView.html">PortalUsagesView</a></li><li><a href="PortalView.html">PortalView</a></li><li><a href="PortalVisualizationsView.html">PortalVisualizationsView</a></li><li class='category-heading' data-category='Views/Portals/Editor'>Views/Portals/Editor</li><li><a href="PortalEditorView.html">PortalEditorView</a></li><li><a href="PortEditorDataView.html">PortEditorDataView</a></li><li><a href="PortEditorImageView.html">PortEditorImageView</a></li><li><a href="PortEditorLogosView.html">PortEditorLogosView</a></li><li><a href="PortEditorMdSectionView.html">PortEditorMdSectionView</a></li><li><a href="PortEditorSectionsView.html">PortEditorSectionsView</a></li><li><a href="PortEditorSectionView.html">PortEditorSectionView</a></li><li><a href="PortEditorSettingsView.html">PortEditorSettingsView</a></li><li class='category-heading' data-category='Views/QueryBuilder'>Views/QueryBuilder</li><li><a href="QueryBuilderView.html">QueryBuilderView</a></li><li><a href="QueryRuleView.html">QueryRuleView</a></li><li class='category-heading' data-category='Views/SearchSelect'>Views/SearchSelect</li><li><a href="AccountSelectView.html">AccountSelectView</a></li><li><a href="AnnotationFilter.html">AnnotationFilter</a></li><li><a href="NodeSelect.html">NodeSelect</a></li><li><a href="ObjectFormatSelect.html">ObjectFormatSelect</a></li><li><a href="QueryFieldSelectView.html">QueryFieldSelectView</a></li><li><a href="SearchableSelectView.html">SearchableSelectView</a></li><li><a href="EMLAnnotation.html">EMLAnnotation</a></li><li class='category-heading' data-category='Deprecated'>Deprecated</li><li><a href="ExternalView.html">ExternalView</a></li><li><a href="LogsSearch.html">LogsSearch</a></li></ul><h3>Global</h3><ul><li><a href="global.html#appConfigPath">appConfigPath</a></li></ul>
</nav>

<div id="main">

    <h1 class="page-title">Source: src/js/models/metadata/eml211/EMLParty.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* global define */
define(['jquery', 'underscore', 'backbone', 'models/DataONEObject'],
    function($, _, Backbone, DataONEObject) {

      /**
      * @class EMLParty
      * @classcategory Models/Metadata/EML211
      * @classdesc EMLParty represents a single Party from the EML 2.1.1 and 2.2.0
      * metadata schema. This can be a person or organization.
      * @see https://eml.ecoinformatics.org/schema/eml-party_xsd.html#ResponsibleParty
      * @extends Backbone.Model
      * @constructor
      */
	var EMLParty = Backbone.Model.extend(
    /** @lends EMLParty.prototype */{

		defaults: function(){
			return {
				objectXML: null,
				objectDOM: null,
				individualName: null,
				organizationName: null,
				positionName: null,
				address: [],
				phone: [],
				fax: [],
				email: [],
				onlineUrl: [],
				roles: [],
				references: null,
				userId: [],
				xmlID: null,
				type: null,
				typeOptions: ["associatedParty", "contact", "creator", "metadataProvider", "publisher"],
				roleOptions: ["custodianSteward", "principalInvestigator", "collaboratingPrincipalInvestigator",
				              "coPrincipalInvestigator", "user"],
				parentModel: null,
        removed: false //Indicates whether this model has been removed from the parent model
			}
		},

		initialize: function(options){
			if(options &amp;&amp; options.objectDOM)
				this.set(this.parse(options.objectDOM));

			if(!this.get("xmlID"))
				this.createID();
			this.on("change:roles", this.setType);
		},

		/*
         * Maps the lower-case EML node names (valid in HTML DOM) to the camel-cased EML node names (valid in EML).
         * Used during parse() and serialize()
         */
		nodeNameMap: function(){
			return {
				"administrativearea"    : "administrativeArea",
        "associatedparty"       : "associatedParty",
				"deliverypoint"         : "deliveryPoint",
				"electronicmailaddress" : "electronicMailAddress",
				"givenname"             : "givenName",
				"individualname"        : "individualName",
				"metadataprovider"		: "metadataProvider",
				"onlineurl"             : "onlineUrl",
				"organizationname"      : "organizationName",
				"positionname"          : "positionName",
				"postalcode"            : "postalCode",
				"surname"               : "surName",
				"userid"                : "userId"
			}
		},

        /*
            Parse the object DOM to create the model
            @param objectDOM the XML DOM to parse
            @return modelJSON the resulting model attributes object
         */
		parse: function(objectDOM){
			if(!objectDOM)
				var objectDOM = this.get("objectDOM");

			var model = this,
				modelJSON = {};

			//Set the name
			var person = $(objectDOM).children("individualname, individualName");

			if(person.length)
				modelJSON.individualName = this.parsePerson(person);

			//Set the phone and fax numbers
			var phones = $(objectDOM).children("phone"),
				phoneNums = [],
				faxNums = [];

			phones.each(function(i, phone){
				if($(phone).attr("phonetype") == "voice")
					phoneNums.push($(phone).text());
				else if($(phone).attr("phonetype") == "facsimile")
					faxNums.push($(phone).text());
			});

			modelJSON.phone = phoneNums;
			modelJSON.fax   = faxNums;

			//Set the address
			var addresses = $(objectDOM).children("address") || [],
				addressesJSON = [];

			addresses.each(function(i, address){
				addressesJSON.push(model.parseAddress(address));
			});

			modelJSON.address = addressesJSON;

			//Set the text fields
			modelJSON.organizationName = $(objectDOM).children("organizationname, organizationName").text() || null;
			modelJSON.positionName     = $(objectDOM).children("positionname, positionName").text() || null;
      // roles
      modelJSON.roles = [];
      $(objectDOM).find("role").each(function(i,role){
        modelJSON.roles.push($(role).text());
      });

			//Set the id attribute
			modelJSON.xmlID = $(objectDOM).attr("id");

			//Email - only set it on the JSON if it exists (we want to avoid an empty string value in the array)
			if( $(objectDOM).children("electronicmailaddress, electronicMailAddress").length ){
				modelJSON.email = _.map($(objectDOM).children("electronicmailaddress, electronicMailAddress"), function(email){
										return  $(email).text();
								  });
			}

			//Online URL - only set it on the JSON if it exists (we want to avoid an empty string value in the array)
			if( $(objectDOM).find("onlineurl, onlineUrl").length ){
				// modelJSON.onlineUrl = [$(objectDOM).find("onlineurl, onlineUrl").first().text()];
				modelJSON.onlineUrl = $(objectDOM).find("onlineurl, onlineUrl").map(function(i,v) {
					return $(v).text();
				}).get();
			}

			//User ID - only set it on the JSON if it exists (we want to avoid an empty string value in the array)
			if( $(objectDOM).find("userid, userId").length ){
				modelJSON.userId = [$(objectDOM).find("userid, userId").first().text()];
			}

			return modelJSON;
		},

		parseNode: function(node){
			if(!node || (Array.isArray(node) &amp;&amp; !node.length))
				return;

			this.set($(node)[0].localName, $(node).text());
		},

		parsePerson: function(personXML){
			var person = {
					givenName: [],
					surName: "",
					salutation: []
				},
				givenName   = $(personXML).find("givenname, givenName"),
				surName     = $(personXML).find("surname, surName"),
				salutations = $(personXML).find("salutation");

			//Concatenate all the given names into one, for now
			//TODO: Support multiple given names
			givenName.each(function(i, name){
				if(i==0)
					person.givenName[0] = "";

				person.givenName[0] += $(name).text() + " ";

				if(i==givenName.length-1)
					person.givenName[0] = person.givenName[0].trim();
			});

			person.surName = surName.text();

			salutations.each(function(i, name){
				person.salutation.push($(name).text());
			});

			return person;
		},

		parseAddress: function(addressXML){
			var address    = {},
				delPoint   = $(addressXML).find("deliverypoint, deliveryPoint"),
				city       = $(addressXML).find("city"),
				adminArea  = $(addressXML).find("administrativearea, administrativeArea"),
				postalCode = $(addressXML).find("postalcode, postalCode"),
				country    = $(addressXML).find("country");

			address.city               = city.length? city.text() : "";
			address.administrativeArea = adminArea.length? adminArea.text() : "";
			address.postalCode         = postalCode.length? postalCode.text() : "";
			address.country            = country.length? country.text() : "";

			//Get an array of all the address line (or delivery point) values
			var addressLines = [];
			_.each(delPoint, function(addressLine, i){
				addressLines.push($(addressLine).text());
			}, this);

			address.deliveryPoint = addressLines;

			return  address;
		},

		serialize: function(){
			var objectDOM = this.updateDOM(),
				xmlString = objectDOM.outerHTML;

			//Camel-case the XML
	    	xmlString = this.formatXML(xmlString);

	    	return xmlString;
		},

		/*
		 * Updates the attributes on this model based on the application user (the app UserModel)
		 */
		createFromUser: function(){
			//Create the name from the user
			var name = this.get("individualName") || {};
			name.givenName  = [MetacatUI.appUserModel.get("firstName")];
			name.surName    = MetacatUI.appUserModel.get("lastName");
			this.set("individualName", name);

			//Get the email and username
			if(MetacatUI.appUserModel.get("email"))
				this.set("email", [MetacatUI.appUserModel.get("email")]);

			this.set("userId", [MetacatUI.appUserModel.get("username")]);
		},

		/*
		 * Makes a copy of the original XML DOM and updates it with the new values from the model.
		 */
		updateDOM: function(){
			var type = this.get("type") || "associatedParty",
				objectDOM = this.get("objectDOM");

			// If there is already an XML node for this model and it is the wrong type,
			//   then replace the XML node contents
			if(objectDOM &amp;&amp; objectDOM.nodeName != type.toUpperCase()){
				objectDOM = $(document.createElement(type)).html( objectDOM.innerHTML );
			}
			// If there is already an XML node for this model and it is the correct type,
			//   then simply clone the XML node
			else if(objectDOM){
				objectDOM = objectDOM.cloneNode(true);
			}
			// Otherwise, create a new XML node
			else{
				objectDOM = document.createElement(type);
			}

			//There needs to be at least one individual name, organization name, or position name
			if( this.nameIsEmpty() &amp;&amp; !this.get("organizationName") &amp;&amp; !this.get("positionName"))
				return "";

			var name = this.get("individualName");
			if(name){
				//Get the individualName node
				var nameNode = $(objectDOM).find("individualname");
				if(!nameNode.length){
					nameNode = document.createElement("individualname");
					$(objectDOM).prepend(nameNode);
				}

				//Empty the individualName node
				$(nameNode).empty();

				 // salutation[s]
				 if(!Array.isArray(name.salutation) &amp;&amp; name.salutation)
          name.salutation = [name.salutation];

         _.each(name.salutation, function(salutation) {
					 $(nameNode).prepend("&lt;salutation>" + salutation + "&lt;/salutation>");
				 });

				 //Given name
				 if(!Array.isArray(name.givenName) &amp;&amp; name.givenName) name.givenName = [name.givenName];
				 _.each(name.givenName, function(givenName) {

          //If there is a given name string, create a givenName node
          if(typeof givenName == "string" &amp;&amp; givenName){
					  $(nameNode).append("&lt;givenname>" + givenName + "&lt;/givenname>");
          }

				 });

				 // surname
				 if(name.surName)
					 $(nameNode).append("&lt;surname>" +  name.surName + "&lt;/surname>");
			}
      //If there is no name set on the model, remove it from the DOM
      else{
        $(objectDOM).find("individualname").remove();
      }

			 // organizationName
			if(this.get("organizationName")){
				//Get the organization name node
				if($(objectDOM).find("organizationname").length)
					var orgNameNode = $(objectDOM).find("organizationname").detach();
				else
					var orgNameNode = document.createElement("organizationname");

				//Insert the text
				$(orgNameNode).text(this.get("organizationName"));

				//If the DOM is empty, append it
				if( !$(objectDOM).children().length )
					$(objectDOM).append(orgNameNode);
				else{
					var insertAfter = this.getEMLPosition(objectDOM, "organizationname");

					if(insertAfter &amp;&amp; insertAfter.length)
						insertAfter.after(orgNameNode);
					else
						$(objectDOM).prepend(orgNameNode);
				}
			}
			//Remove the organization name node if there is no organization name
			else{
				var orgNameNode = $(objectDOM).find("organizationname").remove();
			}

			 // positionName
			if(this.get("positionName")){
				//Get the name node
				if($(objectDOM).find("positionname").length)
					var posNameNode = $(objectDOM).find("positionname").detach();
				else
					var posNameNode = document.createElement("positionname");

				//Insert the text
				$(posNameNode).text(this.get("positionName"));

				//If the DOM is empty, append it
				if( !$(objectDOM).children().length )
					$(objectDOM).append(posNameNode);
				else
					this.getEMLPosition(objectDOM, "positionname").after(posNameNode);
			}
      //Remove the position name node if there is no position name
      else{
        $(objectDOM).find("positionname").remove();
      }

			 // address
			 _.each(this.get("address"), function(address, i) {

				 var addressNode =  $(objectDOM).find("address")[i];

				 if(!addressNode){
					 addressNode = document.createElement("address");
					 this.getEMLPosition(objectDOM, "address").after(addressNode);
				 }

         //Remove all the delivery points since they'll be reserialized
         $(addressNode).find("deliverypoint").remove();

				 _.each(address.deliveryPoint, function(deliveryPoint, ii){
					 if(!deliveryPoint) return;

					 var delPointNode = $(addressNode).find("deliverypoint")[ii];

					 if(!delPointNode){
						 delPointNode = document.createElement("deliverypoint");

						 //Add the deliveryPoint node to the address node
						 //Insert after the last deliveryPoint node
						 var appendAfter = $(addressNode).find("deliverypoint")[ii-1];
						 if(appendAfter)
							 $(appendAfter).after(delPointNode);
						 //Or just prepend to the beginning
						 else
							 $(addressNode).prepend(delPointNode);
					 }

					 $(delPointNode).text(deliveryPoint);
				 });

				 if(address.city){
					 var cityNode = $(addressNode).find("city");

					 if(!cityNode.length){
						 cityNode = document.createElement("city");

             if(this.getEMLPosition(addressNode, "city")){
               this.getEMLPosition(addressNode, "city").after(cityNode);
             }
             else{
                $(addressNode).append(cityNode);
             }
					 }

					 $(cityNode).text(address.city);
				 }
         else{
           $(addressNode).find("city").remove();
         }

				 if(address.administrativeArea){
					 var adminAreaNode = $(addressNode).find("administrativearea");

					 if(!adminAreaNode.length){
						 adminAreaNode = document.createElement("administrativearea");

             if(this.getEMLPosition(addressNode, "administrativearea")){
               this.getEMLPosition(addressNode, "administrativearea").after(adminAreaNode);
             }
             else{
                $(addressNode).append(adminAreaNode);
             }

					 }

					 $(adminAreaNode).text(address.administrativeArea);
				 }
         else{
           $(addressNode).find("administrativearea").remove();
         }

				 if(address.postalCode){
					 var postalcodeNode = $(addressNode).find("postalcode");

					 if(!postalcodeNode.length){
						 postalcodeNode = document.createElement("postalcode");

             if(this.getEMLPosition(addressNode, "postalcode")){
               this.getEMLPosition(addressNode, "postalcode").after(postalcodeNode);
             }
             else{
                $(addressNode).append(postalcodeNode);
             }

					 }

					 $(postalcodeNode).text(address.postalCode);
				 }
         else{
           $(addressNode).find("postalcode").remove();
         }

				 if(address.country){
					 var countryNode = $(addressNode).find("country");

					 if(!countryNode.length){
						 countryNode = document.createElement("country");

             if(this.getEMLPosition(addressNode, "country")){
               this.getEMLPosition(addressNode, "country").after(countryNode);
             }
             else{
                $(addressNode).append(countryNode);
             }

					 }

					 $(countryNode).text(address.country);
				 }
         else{
           $(addressNode).find("country").remove();
         }

			 }, this);

       if( this.get("address").length == 0 ){
         $(objectDOM).find("address").remove();
       }

			 // phone[s]
       $(objectDOM).find("phone[phonetype='voice']").remove();
			 _.each(this.get("phone"), function(phone) {

				var phoneNode = $(document.createElement("phone")).attr("phonetype", "voice").text(phone);
				this.getEMLPosition(objectDOM, "phone").after(phoneNode);

			 }, this);

			 // fax[es]
       $(objectDOM).find("phone[phonetype='facsimile']").remove();
			 _.each(this.get("fax"), function(fax) {

				var faxNode = $(document.createElement("phone")).attr("phonetype", "facsimile").text(fax);
				this.getEMLPosition(objectDOM, "phone").after(faxNode);

			 }, this);

			 // electronicMailAddress[es]
       $(objectDOM).find("electronicmailaddress").remove();
			 _.each(this.get("email"), function(email) {

			   var emailNode = document.createElement("electronicmailaddress");
				 this.getEMLPosition(objectDOM, "electronicmailaddress").after(emailNode);

				 $(emailNode).text(email);

			 }, this);

			// online URL[es]
      $(objectDOM).find("onlineurl").remove();
			 _.each(this.get("onlineUrl"), function(onlineUrl, i) {

				var urlNode = document.createElement("onlineurl");
			  this.getEMLPosition(objectDOM, "onlineurl").after(urlNode);

				$(urlNode).text(onlineUrl);

			 }, this);

			 //user ID
			 var userId = Array.isArray(this.get("userId")) ? this.get("userId") : [this.get("userId")];
			 _.each(userId, function(id) {
				 if(!id) return;

				 var idNode = $(objectDOM).find("userid");

				 //Create the userid node
				 if(!idNode.length){

					 idNode = $(document.createElement("userid"));

					 this.getEMLPosition(objectDOM, "userid").after(idNode);
				 }

				 //If this is an orcid identifier, format it correctly
				 if(this.isOrcid(id)){
            // Add the directory attribute
					 idNode.attr("directory", "https://orcid.org");

           //If this ORCID does not start with "http"
           if( id.indexOf("http") == -1 ){
             //If this is an ORCID with just the 16-digit numbers and hyphens, then add
             // the https://orcid.org/ prefix to it
             if( id.length == 19){
               id = "https://orcid.org/" + id;
             }
             //If it starts with "orcid.org", then add the "https://" prefix
             else if( id.indexOf("orcid.org") == 0 ){
               id = "https://" + id;
             }
             //If it starts with "www.orcid.org", then add the "https" prefix and remove the "www"
             else if( id.indexOf("www.orcid.org") == 0 ){
               id = "https://" + id.replace("www.orcid.org", "orcid.org");
             }
           }

           //If there is a "www", remove it
           if( id.indexOf("www.orcid.org") > -1 ){
             id = id.replace("www.orcid.org", "orcid.org");
           }

           //If it has the http:// prefix, add the 's' for secure protocol
           if( id.indexOf("http://") == 0){
             id = id.replace("http", "https");
           }

				 }
				 else{
					 idNode.attr("directory", "unknown");
				 }

				 $(idNode).text(id);

			 }, this);

       //Remove all the user id's if there aren't any in the model
       if( userId.length == 0 ){
         $(objectDOM).find("userid").remove();
       }

			// role
			//If this party type is not an associated party, then remove the role element
			if( type != "associatedParty" &amp;&amp; type != "personnel" ){
				$(objectDOM).find("role").remove();
			}
			//Otherwise, change the value of the role element
			else {
				// If for some reason there is no role, create a default role
				if( !this.get("roles").length ){
          var roles = ["Associated Party"];
        } else {
          var roles = this.get("roles");
        }
        _.each(roles, function(role, i){
          var roleSerialized = $(objectDOM).find("role");
          if(roleSerialized.length){
            $(roleSerialized[i]).text(role)
          } else {
            roleSerialized = $(document.createElement("role")).text(role);
          	this.getEMLPosition(objectDOM, "role").after( roleSerialized );
          }
        }, this);

			}

			//XML id attribute
			this.createID();
			//if(this.get("xmlID"))
				$(objectDOM).attr("id", this.get("xmlID"));
			//else
			//	$(objectDOM).removeAttr("id");

			// Remove empty (zero-length or whitespace-only) nodes
			$(objectDOM).find("*").filter(function() { return $.trim(this.innerHTML) === ""; } ).remove();

			 return objectDOM;
		},

      /*
      * Adds this EMLParty model to it's parent EML211 model in the appropriate role array
      *
      * @return {boolean} - Returns true if the merge was successful, false if the merge was cancelled
      */
    	mergeIntoParent: function(){
    		//Get the type of EML Party, in relation to the parent model
  			if(this.get("type") &amp;&amp; this.get("type") != "associatedParty")
  				var type = this.get("type");
  			else
  				var type = "associatedParty";

  			//Update the list of EMLParty models in the parent model
        var parentEML = this.getParentEML();

        if(parentEML.type != "EML")
          return false;

        //Add this model to the EML model
        var successfulAdd = parentEML.addParty(this);

  			//Validate the model
  			this.isValid();

        return successfulAdd;
    	},

      isEmpty: function(){
        // If we add any new fields, be sure to add the attribute here
        var attributes = ["userId", "fax", "phone", "onlineUrl",
                          "email", "positionName", "organizationName"];

         //Check each value in the model that gets serialized to see if there is a value
         for(var i in attributes) {
           //Get the value from the model for this attribute
            var modelValue = this.get(attributes[i]);

            //If this is an array, then we want to check if there are any values in it
            if( Array.isArray(modelValue) ){
             if( modelValue.length > 0 )
                return false;
            }
            //Otherwise, check if this value differs from the default value
            else if(this.get(attributes[i]) !== this.defaults()[attributes[i]]){
              return false;
            }
         }

         //Check for a first and last name
         if( this.get("individualName") &amp;&amp; (this.get("individualName").givenName || this.get("individualName").surName) )
          return false;

          //Check for addresses
          var isAddress = false;

          if( this.get("address") ){

            //Checks if there are any values anywhere in the address
            _.each(this.get("address"), function(address){
              //Delivery point is an array so we need to check the first and second
              //values of that array
              if( address.administrativeArea  || address.city ||
                  address.country || address.postalCode ||
                  (address.deliveryPoint &amp;&amp; address.deliveryPoint.length &amp;&amp;
                  (address.deliveryPoint[0] || address.deliveryPoint[1]) ) ){
                isAddress = true;
              }
            });

          }

          //If we found an address value anywhere, then it is not empty
          if(isAddress)
            return false;

         //If we never found a value, then return true because this model is empty
         return true;
      },

		/*
         * Returns the node in the given EML snippet that the given node type should be inserted after
         */
        getEMLPosition: function(objectDOM, nodeName){
        	var nodeOrder = [ "individualname", "organizationname", "positionname", "address", "phone",
        	                  "electronicmailaddress", "onlineurl", "userid", "role"];
          var addressOrder = ["deliverypoint", "city", "administrativearea", "postalcode", "country"];

          //If this is an address node, find the position within the address
          if( _.contains(addressOrder, nodeName) ){
            nodeOrder = addressOrder;
          }

        	var position = _.indexOf(nodeOrder, nodeName);
        	if(position == -1)
        		return $(objectDOM).children().last();

        	//Go through each node in the node list and find the position where this node will be inserted after
        	for(var i=position-1; i>=0; i--){
        		if($(objectDOM).find(nodeOrder[i]).length)
        			return $(objectDOM).find(nodeOrder[i]).last();
        	}

        	return false;
        },

		createID: function(){
			this.set("xmlID", Math.ceil(Math.random() * (9999999999999999 - 1000000000000000) + 1000000000000000));
		},

		setType: function(){
      if(this.get("roles")){
        if(this.get("roles").length &amp;&amp; !this.get("type")){
          this.set("type", "associatedParty");
        }
      }
		},

		trickleUpChange: function(){
        if ( this.get("parentModel") ) {
            MetacatUI.rootDataPackage.packageModel.set("changed", true);
        }
		},

    removeFromParent: function(){
        if( !this.get("parentModel") )
            return;
        else if( typeof this.get("parentModel").removeParty != "function" )
            return;

        this.get("parentModel").removeParty(this);

        this.set("removed", true);
    },

		/*
		 * Checks the values of the model to determine if it is EML-valid
		 */
		validate: function(){

			var individualName = this.get("individualName") || {},
				givenName = individualName.givenName || [],
				surName   = individualName.surName || null;

			//If there are no values in this model that would be serialized, then the model is valid
			if( !this.get("organizationName") &amp;&amp; !this.get("positionName") &amp;&amp; !givenName.length &amp;&amp; !surName
					&amp;&amp; !this.get("address").length &amp;&amp; !this.get("phone").length &amp;&amp; !this.get("fax").length
					&amp;&amp; !this.get("email").length &amp;&amp; !this.get("onlineUrl").length &amp;&amp; !this.get("userId").length){

				return;

			}

			//The EMLParty must have either an organization name, position name, or surname.
      // It must ALSO have a type or role.
			if ( !this.get("organizationName") &amp;&amp; !this.get("positionName") &amp;&amp;
					(!this.get("individualName") || !surName ) ){

				return {
					surName: "Either a last name, position name, or organization name is required.",
					positionName: "",
					organizationName: ""
				}

			}
			//If there is a first name and no last name, then this is not a valid individualName
			else if( (givenName.length &amp;&amp; !surName) &amp;&amp; this.get("organizationName") &amp;&amp; this.get("positionName") ){

				return { surName: "Provide a last name." }

			}
		},

		isOrcid: function(username){
			if(!username) return false;

			//If the ORCID URL is anywhere in this username string, it is an ORCID
			if(username.indexOf("orcid.org") > -1){
				return true;
			}

			/* The ORCID checksum algorithm to determine is a character string is an ORCiD
			 * http://support.orcid.org/knowledgebase/articles/116780-structure-of-the-orcid-identifier
			 */
			var total = 0,
				  baseDigits = username.replace(/-/g, "").substr(0, 15);

			for(var i=0; i&lt;baseDigits.length; i++){
				var digit = parseInt(baseDigits.charAt(i));
				total = (total + digit) * 2;
			}

			var remainder = total % 11,
				result = (12 - remainder) % 11,
				checkDigit = (result == 10) ? "X" : result.toString(),
				isOrcid = (checkDigit == username.charAt(username.length-1));

			return isOrcid;
		},

    /*
    *  Clones all the values of this array into a new JS Object.
    *  Special care is needed for nested objects and arrays
    *  This is helpful when copying this EMLParty to another role in the EML
    */
    copyValues: function(){
      //Get a JSON object of all the model copyValues
      var modelValues = this.toJSON();

      //Go through each model value and properly clone the arrays
      _.each( Object.keys(modelValues), function(key, i){

        //Clone the array via slice()
        if( Array.isArray(modelValues[key]) )
          modelValues[key] = modelValues[key].slice(0);

      });

      //Individual Names are objects, so properly clone them
      if( modelValues.individualName ){
        modelValues.individualName = Object.assign({}, modelValues.individualName);
      }

      //Addresses are objects, so properly clone them
      if( modelValues.address.length ){
        _.each(modelValues.address, function(address, i){
          modelValues.address[i] = Object.assign({}, address);

          //The delivery point is an array of strings, so properly clone the array
          if( Array.isArray(modelValues.address[i].deliveryPoint) )
            modelValues.address[i].deliveryPoint = modelValues.address[i].deliveryPoint.slice(0);
        });
      }
      return modelValues;
	},

	/**
	 * getName - For an individual, returns the first and last name as a string. Otherwise,
	 * returns the organization or position name.
	 *
	 * @return {string} Returns the name of the party or an empty string if one cannot be found
	 *
	 * @since 2.15.0
	 */
	getName: function(){
		return this.get("individualName") ?
			this.get("individualName").givenName + " " + this.get("individualName").surName :
			this.get("organizationName") || this.get("positionName") || "";
	},

    /*
    * function nameIsEmpty - Returns true if the individualName set on this model contains
    * only empty values. Otherwise, returns false. This is just a shortcut for manually checking
    * each name field individually.
    *
    * @return {boolean}
    */
    nameIsEmpty: function(){
      var name = this.get("individualName");

      if( !name || typeof name != "object" )
        return true;

      //Check if there are given names
      var givenName = name.givenName,
          givenNameEmpty = false;

      if( !givenName || (Array.isArray(givenName) &amp;&amp; givenName.length == 0) ||
        (typeof givenName == "string" &amp;&amp; givenName.trim().length == 0) )
          givenNameEmpty = true;

      //Check if there are no sur names
      var surName = name.surName,
          surNameEmpty = false;

      if( !surName || (Array.isArray(surName) &amp;&amp; surName.length == 0) ||
        (typeof surName == "string" &amp;&amp; surName.trim().length == 0) )
          surNameEmpty = true;

      //Check if there are no salutations
      var salutation = name.salutation,
          salutationEmpty = false;

      if( !salutation || (Array.isArray(salutation) &amp;&amp; salutation.length == 0) ||
        (typeof salutation == "string" &amp;&amp; salutation.trim().length == 0) )
          salutationEmpty = true;

      if( givenNameEmpty &amp;&amp; surNameEmpty &amp;&amp; salutationEmpty )
        return true;
      else
        return false;

    },

    /*
    * Climbs up the model heirarchy until it finds the EML model
    *
    * @return {EML211 or false} - Returns the EML 211 Model or false if not found
    */
    getParentEML: function(){
      var emlModel = this.get("parentModel"),
          tries = 0;

      while (emlModel.type !== "EML" &amp;&amp; tries &lt; 6){
        emlModel = emlModel.get("parentModel");
        tries++;
      }

      if( emlModel &amp;&amp; emlModel.type == "EML")
        return emlModel;
      else
        return false;

    },

		formatXML: function(xmlString){
			return DataONEObject.prototype.formatXML.call(this, xmlString);
		}
	});

	return EMLParty;
});
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
