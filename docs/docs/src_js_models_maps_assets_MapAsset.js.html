<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>MetacatUI Dev Docs: Source: src/js/models/maps/assets/MapAsset.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
    <link type="text/css" rel="stylesheet" href="/metacatui/assets/css/styles.css">
    <link type="text/css" rel="stylesheet" href="styles/style.css">
</head>

<body>

<nav id="nav">
    <a href="/">
      <div class="logo">
<svg class="cat" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="cat" class="svg-inline--fa fa-cat fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M290.59 192c-20.18 0-106.82 1.98-162.59 85.95V192c0-52.94-43.06-96-96-96-17.67 0-32 14.33-32 32s14.33 32 32 32c17.64 0 32 14.36 32 32v256c0 35.3 28.7 64 64 64h176c8.84 0 16-7.16 16-16v-16c0-17.67-14.33-32-32-32h-32l128-96v144c0 8.84 7.16 16 16 16h32c8.84 0 16-7.16 16-16V289.86c-10.29 2.67-20.89 4.54-32 4.54-61.81 0-113.52-44.05-125.41-102.4zM448 96h-64l-64-64v134.4c0 53.02 42.98 96 96 96s96-42.98 96-96V32l-64 64zm-72 80c-8.84 0-16-7.16-16-16s7.16-16 16-16 16 7.16 16 16-7.16 16-16 16zm80 0c-8.84 0-16-7.16-16-16s7.16-16 16-16 16 7.16 16 16-7.16 16-16 16z"></path></svg>

<svg width="459px" height="53px" viewBox="0 0 459 53" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g id="metacatui" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <path d="M16.492,52 C17.212,52 17.812,51.748 18.292,51.244 C18.772,50.74 19.012,50.128 19.012,49.408 L19.012,49.408 L18.94,22.912 L30.82,37.816 C31.204,38.344 31.72,38.764 32.368,39.076 C33.016,39.388 33.7,39.544 34.42,39.544 C35.908,39.544 37.132,38.896 38.092,37.6 L38.092,37.6 L49.684,22.912 L49.684,49.408 C49.684,50.128 49.96,50.74 50.512,51.244 C51.064,51.748 51.7,52 52.42,52 L52.42,52 L62.068,52 C62.788,52 63.388,51.748 63.868,51.244 C64.348,50.74 64.588,50.128 64.588,49.408 L64.588,49.408 L64.588,4.12 C64.588,3.448 64.336,2.86 63.832,2.356 C63.328,1.852 62.74,1.6 62.068,1.6 L62.068,1.6 L52.348,1.6 C51.388,1.6 50.56,1.648 49.864,1.744 C49.168,1.84 48.532,2.152 47.956,2.68 L47.956,2.68 L33.916,17.296 L20.524,2.608 C20.332,2.368 19.972,2.14 19.444,1.924 C18.916,1.708 18.412,1.6 17.932,1.6 L17.932,1.6 L6.772,1.6 C6.052,1.6 5.44,1.852 4.936,2.356 C4.432,2.86 4.18,3.448 4.18,4.12 L4.18,4.12 L4.18,49.408 C4.18,50.08 4.432,50.68 4.936,51.208 C5.44,51.736 6.052,52 6.772,52 L6.772,52 L16.492,52 Z M110.74,52 C111.556,52 112.264,51.676 112.864,51.028 C113.464,50.38 113.764,49.624 113.764,48.76 L113.764,48.76 L113.764,42.568 C113.764,41.608 113.464,40.828 112.864,40.228 C112.264,39.628 111.556,39.328 110.74,39.328 L110.74,39.328 L89.428,39.328 L89.428,32.92 L109.732,32.92 C110.5,32.92 111.184,32.596 111.784,31.948 C112.384,31.3 112.684,30.568 112.684,29.752 L112.684,29.752 L112.684,23.488 C112.684,22.576 112.384,21.82 111.784,21.22 C111.184,20.62 110.5,20.32 109.732,20.32 L109.732,20.32 L89.428,20.32 L89.428,14.488 L110.74,14.488 C111.508,14.488 112.204,14.164 112.828,13.516 C113.452,12.868 113.764,12.136 113.764,11.32 L113.764,11.32 L113.764,5.056 C113.764,4.144 113.464,3.388 112.864,2.788 C112.264,2.188 111.556,1.888 110.74,1.888 L110.74,1.888 L76.756,1.888 C75.94,1.888 75.232,2.188 74.632,2.788 C74.032,3.388 73.732,4.144 73.732,5.056 L73.732,5.056 L73.732,48.76 C73.732,49.624 74.032,50.38 74.632,51.028 C75.232,51.676 75.94,52 76.756,52 L76.756,52 L110.74,52 Z M147.604,52 C148.42,52 149.104,51.688 149.656,51.064 C150.208,50.44 150.484,49.672 150.484,48.76 L150.484,48.76 L150.484,16.216 L161.86,16.216 C162.676,16.216 163.396,15.904 164.02,15.28 C164.644,14.656 164.956,13.936 164.956,13.12 L164.956,13.12 L164.956,4.768 C164.956,4 164.644,3.316 164.02,2.716 C163.396,2.116 162.676,1.816 161.86,1.816 L161.86,1.816 L124.132,1.816 C123.22,1.816 122.464,2.104 121.864,2.68 C121.264,3.256 120.964,3.952 120.964,4.768 L120.964,4.768 L120.964,13.12 C120.964,13.936 121.264,14.656 121.864,15.28 C122.464,15.904 123.22,16.216 124.132,16.216 L124.132,16.216 L135.652,16.216 L135.148,48.832 C135.148,49.744 135.424,50.5 135.976,51.1 C136.528,51.7 137.212,52 138.028,52 L138.028,52 L147.604,52 Z M175.828,52 C176.836,52 177.676,51.82 178.348,51.46 C179.02,51.1 179.452,50.584 179.644,49.912 L179.644,49.912 L181.876,42.712 L197.932,42.712 L200.164,49.912 C200.356,50.584 200.8,51.1 201.496,51.46 C202.192,51.82 203.044,52 204.052,52 L204.052,52 L213.916,52 C215.836,51.712 216.796,50.704 216.796,48.976 C216.796,48.304 216.676,47.596 216.436,46.852 C216.196,46.108 216.052,45.616 216.004,45.376 L216.004,45.376 L199.876,4.84 C199.588,3.976 199.036,3.232 198.22,2.608 C197.404,1.984 196.372,1.648 195.124,1.6 L195.124,1.6 L184.756,1.6 C183.604,1.648 182.608,1.948 181.768,2.5 C180.928,3.052 180.292,3.832 179.86,4.84 L179.86,4.84 L163.876,45.376 C163.828,45.472 163.672,45.916 163.408,46.708 C163.144,47.5 163.012,48.304 163.012,49.12 C163.012,50.752 163.948,51.712 165.82,52 L165.82,52 L175.828,52 Z M195.34,30.544 L184.036,30.544 L189.652,13.624 L195.34,30.544 Z M245.38,53.08 C250.612,53.08 255.652,51.544 260.5,48.472 C261.22,47.944 261.58,47.296 261.58,46.528 C261.58,45.808 261.292,45.16 260.716,44.584 L260.716,44.584 L252.796,36.808 C252.364,36.376 251.836,36.16 251.212,36.16 C250.78,36.16 250.372,36.256 249.988,36.448 C248.356,37.12 246.796,37.456 245.308,37.456 C243.244,37.456 241.348,36.952 239.62,35.944 C237.892,34.936 236.512,33.58 235.48,31.876 C234.448,30.172 233.932,28.336 233.932,26.368 C233.932,24.352 234.436,22.504 235.444,20.824 C236.452,19.144 237.832,17.812 239.584,16.828 C241.336,15.844 243.244,15.352 245.308,15.352 C246.892,15.352 248.332,15.64 249.628,16.216 C250.012,16.408 250.444,16.504 250.924,16.504 C251.548,16.504 252.1,16.264 252.58,15.784 L252.58,15.784 L259.636,8.008 C260.164,7.384 260.428,6.76 260.428,6.136 C260.428,5.224 259.996,4.528 259.132,4.048 C254.86,1.552 250.276,0.304 245.38,0.304 C240.532,0.304 236.032,1.492 231.88,3.868 C227.728,6.244 224.44,9.448 222.016,13.48 C219.592,17.512 218.38,21.904 218.38,26.656 C218.38,31.408 219.592,35.812 222.016,39.868 C224.44,43.924 227.728,47.14 231.88,49.516 C236.032,51.892 240.532,53.08 245.38,53.08 Z M279.796,52 C280.804,52 281.644,51.82 282.316,51.46 C282.988,51.1 283.42,50.584 283.612,49.912 L283.612,49.912 L285.844,42.712 L301.9,42.712 L304.132,49.912 C304.324,50.584 304.768,51.1 305.464,51.46 C306.16,51.82 307.012,52 308.02,52 L308.02,52 L317.884,52 C319.804,51.712 320.764,50.704 320.764,48.976 C320.764,48.304 320.644,47.596 320.404,46.852 C320.164,46.108 320.02,45.616 319.972,45.376 L319.972,45.376 L303.844,4.84 C303.556,3.976 303.004,3.232 302.188,2.608 C301.372,1.984 300.34,1.648 299.092,1.6 L299.092,1.6 L288.724,1.6 C287.572,1.648 286.576,1.948 285.736,2.5 C284.896,3.052 284.26,3.832 283.828,4.84 L283.828,4.84 L267.844,45.376 C267.796,45.472 267.64,45.916 267.376,46.708 C267.112,47.5 266.98,48.304 266.98,49.12 C266.98,50.752 267.916,51.712 269.788,52 L269.788,52 L279.796,52 Z M299.308,30.544 L288.004,30.544 L293.62,13.624 L299.308,30.544 Z M352.588,52 C353.404,52 354.088,51.688 354.64,51.064 C355.192,50.44 355.468,49.672 355.468,48.76 L355.468,48.76 L355.468,16.216 L366.844,16.216 C367.66,16.216 368.38,15.904 369.004,15.28 C369.628,14.656 369.94,13.936 369.94,13.12 L369.94,13.12 L369.94,4.768 C369.94,4 369.628,3.316 369.004,2.716 C368.38,2.116 367.66,1.816 366.844,1.816 L366.844,1.816 L329.116,1.816 C328.204,1.816 327.448,2.104 326.848,2.68 C326.248,3.256 325.948,3.952 325.948,4.768 L325.948,4.768 L325.948,13.12 C325.948,13.936 326.248,14.656 326.848,15.28 C327.448,15.904 328.204,16.216 329.116,16.216 L329.116,16.216 L340.636,16.216 L340.132,48.832 C340.132,49.744 340.408,50.5 340.96,51.1 C341.512,51.7 342.196,52 343.012,52 L343.012,52 L352.588,52 Z M402.052,52.792 C408.1,52.792 412.912,51.628 416.488,49.3 C420.064,46.972 422.536,44.068 423.904,40.588 C425.272,37.108 425.932,33.424 425.884,29.536 C425.884,29.5309474 425.883967,29.5237673 425.8839,29.5144598 L425.883102,29.4330859 C425.879911,29.1480111 425.868211,28.3183158 425.848,26.944 C425.8294,25.6792 425.818008,22.91524 425.813823,18.65212 L425.813103,17.80828 C425.812997,17.66452 425.8129,17.5192 425.81281,17.37232 L425.812,3.904 C425.86,3.184 425.632,2.62 425.128,2.212 C424.624,1.804 423.916,1.6 423.004,1.6 L423.004,1.6 L413.428,1.6 C412.612,1.6 411.904,1.828 411.304,2.284 C410.704,2.74 410.404,3.28 410.404,3.904 L410.404,3.904 L410.26,27.808 C410.26,34.144 407.476,37.312 401.908,37.312 C399.076,37.312 396.832,36.412 395.176,34.612 C393.52,32.812 392.668,30.352 392.62,27.232 L392.62,27.232 L392.332,3.76 C392.332,3.088 392.068,2.56 391.54,2.176 C391.012,1.792 390.268,1.6 389.308,1.6 L389.308,1.6 L379.876,1.6 C378.244,1.6 377.428,2.32 377.428,3.76 L377.428,3.76 L377.5,28.816 C377.5,33.04 378.376,36.964 380.128,40.588 C381.88,44.212 384.592,47.152 388.264,49.408 C391.936,51.664 396.532,52.792 402.052,52.792 Z M449.284,52.144 C450.148,52.144 450.88,51.844 451.48,51.244 C452.08,50.644 452.38,49.84 452.38,48.832 L452.38,48.832 L452.38,4.912 C452.38,4 452.08,3.22 451.48,2.572 C450.88,1.924 450.148,1.6 449.284,1.6 L449.284,1.6 L439.42,1.6 C438.46,1.6 437.692,1.924 437.116,2.572 C436.54,3.22 436.252,4 436.252,4.912 L436.252,4.912 L436.252,48.832 C436.252,49.84 436.54,50.644 437.116,51.244 C437.692,51.844 438.46,52.144 439.42,52.144 L439.42,52.144 L449.284,52.144 Z" id="metacatui" fill="#FCBF49" fill-rule="nonzero"></path>
    </g>
</svg>
</logo>

    </a>
    <h3>Externals</h3><ul><li><a href="external-TaxonomicClassification.html">TaxonomicClassification</a></li></ul><h3>Namespaces</h3><ul><li><a href="AppConfig.html">AppConfig</a></li><li><a href="EMLUtilities.html">EMLUtilities</a></li><li><a href="IconUtilities.html">IconUtilities</a></li><li><a href="MapConfig.html">MapConfig</a></li><li><a href="MetacatUI.html">MetacatUI</a></li><li><a href="SearchParams.html">SearchParams</a></li><li><a href="Utilities.html">Utilities</a></li><li><a href="XMLUtilities.html">XMLUtilities</a></li></ul><h3>Classes</h3><ul><li class='category-heading' data-category='Collections'>Collections</li><li><a href="AccessPolicy.html">AccessPolicy</a></li><li><a href="Citations.html">Citations</a></li><li><a href="DataPackage.html">DataPackage</a></li><li><a href="Filters.html">Filters</a></li><li><a href="ObjectFormats.html">ObjectFormats</a></li><li><a href="ProjectList.html">ProjectList</a></li><li><a href="QualityReport.html">QualityReport</a></li><li><a href="SolrResults.html">SolrResults</a></li><li><a href="Units.html">Units</a></li><li><a href="UserGroup.html">UserGroup</a></li><li class='category-heading' data-category='Collections/Bookkeeper'>Collections/Bookkeeper</li><li><a href="Quotas.html">Quotas</a></li><li><a href="Usages.html">Usages</a></li><li class='category-heading' data-category='Collections/Geohashes'>Collections/Geohashes</li><li><a href="Geohashes.html">Geohashes</a></li><li class='category-heading' data-category='Collections/Maps'>Collections/Maps</li><li><a href="AssetCategories.html">AssetCategories</a></li><li><a href="AssetColors.html">AssetColors</a></li><li><a href="Features.html">Features</a></li><li><a href="GeoPoints.html">GeoPoints</a></li><li><a href="MapAssets.html">MapAssets</a></li><li><a href="VectorFilters.html">VectorFilters</a></li><li><a href="ZoomPresets.html">ZoomPresets</a></li><li class='category-heading' data-category='Collections/Metadata/EML'>Collections/Metadata/EML</li><li><a href="EMLAnnotations.html">EMLAnnotations</a></li><li><a href="EMLAttributes.html">EMLAttributes</a></li><li><a href="EMLEntities.html">EMLEntities</a></li><li><a href="EMLMissingValueCodes.html">EMLMissingValueCodes</a></li><li class='category-heading' data-category='Collections/Ontologies'>Collections/Ontologies</li><li><a href="BioontologyResults.html">BioontologyResults</a></li><li class='category-heading' data-category='Collections/QueryFields'>Collections/QueryFields</li><li><a href="QueryFields.html">QueryFields</a></li><li class='category-heading' data-category='Collections/SearchSelect'>Collections/SearchSelect</li><li><a href="SearchSelectOptions.html">SearchSelectOptions</a></li><li class='category-heading' data-category='Common'>Common</li><li><a href="ResourceMapResolver.html">ResourceMapResolver</a></li><li class='category-heading' data-category='Errors'>Errors</li><li><a href="EmptyAttributeListError.html">EmptyAttributeListError</a></li><li><a href="InvalidAttributeListError.html">InvalidAttributeListError</a></li><li class='category-heading' data-category='Models'>Models</li><li><a href="AccessRule.html">AccessRule</a></li><li><a href="Accordion.html">Accordion</a></li><li><a href="AppModel.html">AppModel</a></li><li><a href="CitationModel.html">CitationModel</a></li><li><a href="CollectionModel.html">CollectionModel</a></li><li><a href="CrossRef.html">CrossRef</a></li><li><a href="DataONEObject.html">DataONEObject</a></li><li><a href="LookupModel.html">LookupModel</a></li><li><a href="Map.html">Map</a></li><li><a href="Metrics.html">Metrics</a></li><li><a href="PackageModel.html">PackageModel</a></li><li><a href="QualityCheck.html">QualityCheck</a></li><li><a href="Search.html">Search</a></li><li><a href="SolrResult.html">SolrResult</a></li><li><a href="Stats.html">Stats</a></li><li><a href="UserModel.html">UserModel</a></li><li class='category-heading' data-category='Models/Accordion'>Models/Accordion</li><li><a href="AccordionItem.html">AccordionItem</a></li><li class='category-heading' data-category='Models/Analytics'>Models/Analytics</li><li><a href="Analytics.html">Analytics</a></li><li><a href="GoogleAnalytics.html">GoogleAnalytics</a></li><li class='category-heading' data-category='Models/Bookkeeper'>Models/Bookkeeper</li><li><a href="Quota.html">Quota</a></li><li><a href="Subscription.html">Subscription</a></li><li><a href="Usage.html">Usage</a></li><li class='category-heading' data-category='Models/Connectors'>Models/Connectors</li><li><a href="BioontologyAccordionSearchSelect.html">BioontologyAccordionSearchSelect</a></li><li><a href="FiltersMapConnector.html">FiltersMapConnector</a></li><li><a href="FiltersSearchConnector.html">FiltersSearchConnector</a></li><li><a href="GeoPointsCesiumConnector.html">GeoPointsCesiumConnector</a></li><li><a href="GeoPointsCesiumPointsConnector.html">GeoPointsCesiumPointsConnector</a></li><li><a href="GeoPointsCesiumPolygonConnector.html">GeoPointsCesiumPolygonConnector</a></li><li><a href="MapSearchConnector.html">MapSearchConnector</a></li><li><a href="MapSearchFiltersConnector.html">MapSearchFiltersConnector</a></li><li class='category-heading' data-category='Models/Filters'>Models/Filters</li><li><a href="BooleanFilter.html">BooleanFilter</a></li><li><a href="ChoiceFilter.html">ChoiceFilter</a></li><li><a href="DateFilter.html">DateFilter</a></li><li><a href="Filter.html">Filter</a></li><li><a href="FilterGroup.html">FilterGroup</a></li><li><a href="NumericFilter.html">NumericFilter</a></li><li><a href="SpatialFilter.html">SpatialFilter</a></li><li><a href="ToggleFilter.html">ToggleFilter</a></li><li class='category-heading' data-category='Models/Formats'>Models/Formats</li><li><a href="ObjectFormat.html">ObjectFormat</a></li><li class='category-heading' data-category='Models/Geocoder'>Models/Geocoder</li><li><a href="GeocodedLocation.html">GeocodedLocation</a></li><li><a href="GeocoderSearch.html">GeocoderSearch</a></li><li><a href="GoogleMapsAutocompleter.html">GoogleMapsAutocompleter</a></li><li><a href="GoogleMapsGeocoder.html">GoogleMapsGeocoder</a></li><li><a href="Prediction.html">Prediction</a></li><li class='category-heading' data-category='Models/Geohashes'>Models/Geohashes</li><li><a href="Geohash.html">Geohash</a></li><li class='category-heading' data-category='Models/Maps'>Models/Maps</li><li><a href="AssetCategory.html">AssetCategory</a></li><li><a href="AssetColor.html">AssetColor</a></li><li><a href="AssetColorPalette.html">AssetColorPalette</a></li><li><a href="ExpansionPanelsModel.html">ExpansionPanelsModel</a></li><li><a href="Feature.html">Feature</a></li><li><a href="GeoBoundingBox.html">GeoBoundingBox</a></li><li><a href="GeoPoint.html">GeoPoint</a></li><li><a href="GeoScale.html">GeoScale</a></li><li><a href="GeoUtilities.html">GeoUtilities</a></li><li><a href="MapInteraction.html">MapInteraction</a></li><li><a href="MapModel.html">MapModel</a></li><li><a href="VectorFilter.html">VectorFilter</a></li><li><a href="ViewfinderModel.html">ViewfinderModel</a></li><li><a href="ZoomPresetModel.html">ZoomPresetModel</a></li><li class='category-heading' data-category='Models/Maps/Assets'>Models/Maps/Assets</li><li><a href="Cesium3DTileset.html">Cesium3DTileset</a></li><li><a href="CesiumGeohash.html">CesiumGeohash</a></li><li><a href="CesiumImagery.html">CesiumImagery</a></li><li><a href="CesiumTerrain.html">CesiumTerrain</a></li><li><a href="CesiumVectorData.html">CesiumVectorData</a></li><li><a href="MapAsset.html">MapAsset</a></li><li class='category-heading' data-category='Models/Metadata'>Models/Metadata</li><li><a href="ScienceMetadata.html">ScienceMetadata</a></li><li class='category-heading' data-category='Models/Metadata/EML'>Models/Metadata/EML</li><li><a href="EMLMethodStep.html">EMLMethodStep</a></li><li><a href="EMLSpecializedText.html">EMLSpecializedText</a></li><li><a href="EMLTaxonCoverage.html">EMLTaxonCoverage</a></li><li class='category-heading' data-category='Models/Metadata/EML211'>Models/Metadata/EML211</li><li><a href="EML211.html">EML211</a></li><li><a href="EMLAnnotation.html">EMLAnnotation</a></li><li><a href="EMLAttribute.html">EMLAttribute</a></li><li><a href="EMLAttributeList.html">EMLAttributeList</a></li><li><a href="EMLDataTable.html">EMLDataTable</a></li><li><a href="EMLDistribution.html">EMLDistribution</a></li><li><a href="EMLEntity.html">EMLEntity</a></li><li><a href="EMLGeoCoverage.html">EMLGeoCoverage</a></li><li><a href="EMLMeasurementScale.html">EMLMeasurementScale</a></li><li><a href="EMLMethods.html">EMLMethods</a></li><li><a href="EMLMissingValueCode.html">EMLMissingValueCode</a></li><li><a href="EMLNonNumericDomain.html">EMLNonNumericDomain</a></li><li><a href="EMLNumericDomain.html">EMLNumericDomain</a></li><li><a href="EMLOtherEntity.html">EMLOtherEntity</a></li><li><a href="EMLParty.html">EMLParty</a></li><li><a href="EMLReferences.html">EMLReferences</a></li><li><a href="EMLTemporalCoverage.html">EMLTemporalCoverage</a></li><li><a href="EMLText211.html">EMLText211</a></li><li><a href="EMLUnit.html">EMLUnit</a></li><li class='category-heading' data-category='Models/Metadata/EML220'>Models/Metadata/EML220</li><li><a href="EMLText.html">EMLText</a></li><li class='category-heading' data-category='Models/Ontologies'>Models/Ontologies</li><li><a href="BioOntology.html">BioOntology</a></li><li><a href="Bioontology_.html">Bioontology</a></li><li><a href="BioontologyBatch.html">BioontologyBatch</a></li><li><a href="BioontologyClass.html">BioontologyClass</a></li><li class='category-heading' data-category='Models/Portals'>Models/Portals</li><li><a href="PortalImage.html">PortalImage</a></li><li><a href="PortalModel.html">PortalModel</a></li><li><a href="PortalSectionModel.html">PortalSectionModel</a></li><li class='category-heading' data-category='Models/Projects'>Models/Projects</li><li><a href="Project.html">Project</a></li><li class='category-heading' data-category='Models/QueryFields'>Models/QueryFields</li><li><a href="QueryField.html">QueryField</a></li><li class='category-heading' data-category='Models/SearchSelect'>Models/SearchSelect</li><li><a href="AccountSearchSelect.html">AccountSearchSelect</a></li><li><a href="QueryFieldSearchSelect.html">QueryFieldSearchSelect</a></li><li><a href="SearchSelect.html">SearchSelect</a></li><li><a href="SelectOptionModel.html">SelectOptionModel</a></li><li><a href="SolrAutocomplete.html">SolrAutocomplete</a></li><li class='category-heading' data-category='Models/SysMeta'>Models/SysMeta</li><li><a href="VersionTracker.html">VersionTracker</a></li><li class='category-heading' data-category='Models/schemaOrg'>Models/schemaOrg</li><li><a href="SchemaOrgModel.html">SchemaOrgModel</a></li><li class='category-heading' data-category='Router'>Router</li><li><a href="UIRouter.html">UIRouter</a></li><li class='category-heading' data-category='Views'>Views</li><li><a href="AccessPolicyView.html">AccessPolicyView</a></li><li><a href="AccessRuleView.html">AccessRuleView</a></li><li><a href="AnnotationView.html">AnnotationView</a></li><li><a href="AppView.html">AppView</a></li><li><a href="CanonicalDatasetHandlerView.html">CanonicalDatasetHandlerView</a></li><li><a href="CatalogSearchView.html">CatalogSearchView</a></li><li><a href="CitationHeaderView.html">CitationHeaderView</a></li><li><a href="CitationListView.html">CitationListView</a></li><li><a href="CitationModalView.html">CitationModalView</a></li><li><a href="CitationView.html">CitationView</a></li><li><a href="ColorPaletteView.html">ColorPaletteView</a></li><li><a href="DataCatalogView.html">DataCatalogView</a></li><li><a href="DataCatalogViewWithFilters.html">DataCatalogViewWithFilters</a></li><li><a href="DataItemView.html">DataItemView</a></li><li><a href="DataObjectView.html">DataObjectView</a></li><li><a href="DataPackageView.html">DataPackageView</a></li><li><a href="DownloadButtonView.html">DownloadButtonView</a></li><li><a href="DraftsView.html">DraftsView</a></li><li><a href="EditCollectionView.html">EditCollectionView</a></li><li><a href="EditorView.html">EditorView</a></li><li><a href="FooterView.html">FooterView</a></li><li><a href="GroupListView.html">GroupListView</a></li><li><a href="ImageUploaderView.html">ImageUploaderView</a></li><li><a href="MarkdownEditorView.html">MarkdownEditorView</a></li><li><a href="MarkdownView.html">MarkdownView</a></li><li><a href="MdqRunView.html">MdqRunView</a></li><li><a href="MetadataView.html">MetadataView</a></li><li><a href="MetricModalView.html">MetricModalView</a></li><li><a href="MetricView.html">MetricView</a></li><li><a href="MetricsChartView.html">MetricsChartView</a></li><li><a href="NavbarView.html">NavbarView</a></li><li><a href="RegisterCitationView.html">RegisterCitationView</a></li><li><a href="SearchResultView.html">SearchResultView</a></li><li><a href="SignInView.html">SignInView</a></li><li><a href="TOCView.html">TOCView</a></li><li><a href="TableEditorView.html">TableEditorView</a></li><li><a href="UserGroupView.html">UserGroupView</a></li><li><a href="UserView.html">UserView</a></li><li><a href="ViewDataButtonView.html">ViewDataButtonView</a></li><li class='category-heading' data-category='Views/Accordion'>Views/Accordion</li><li><a href="AccordionItemView.html">AccordionItemView</a></li><li><a href="AccordionView.html">AccordionView</a></li><li class='category-heading' data-category='Views/Filters'>Views/Filters</li><li><a href="BooleanFilterView.html">BooleanFilterView</a></li><li><a href="ChoiceFilterView.html">ChoiceFilterView</a></li><li><a href="DateFilterView.html">DateFilterView</a></li><li><a href="FilterEditorView.html">FilterEditorView</a></li><li><a href="FilterGroupView.html">FilterGroupView</a></li><li><a href="FilterGroupsView.html">FilterGroupsView</a></li><li><a href="FilterView.html">FilterView</a></li><li><a href="NumericFilterView.html">NumericFilterView</a></li><li><a href="SemanticFilterView.html">SemanticFilterView</a></li><li><a href="ToggleFilterView.html">ToggleFilterView</a></li><li class='category-heading' data-category='Views/Maps'>Views/Maps</li><li><a href="CesiumWidgetView.html">CesiumWidgetView</a></li><li><a href="DownloadPanelView.html">DownloadPanelView</a></li><li><a href="FeatureInfoView.html">FeatureInfoView</a></li><li><a href="LayerCategoryListView.html">LayerCategoryListView</a></li><li><a href="LayerDetailView.html">LayerDetailView</a></li><li><a href="LayerDetailsView.html">LayerDetailsView</a></li><li><a href="LayerInfoView.html">LayerInfoView</a></li><li><a href="LayerItemView.html">LayerItemView</a></li><li><a href="LayerListView.html">LayerListView</a></li><li><a href="LayerNavigationView.html">LayerNavigationView</a></li><li><a href="LayerOpacityView.html">LayerOpacityView</a></li><li><a href="LayersPanelView.html">LayersPanelView</a></li><li><a href="MapHelpPanel.html">MapHelpPanel</a></li><li><a href="MapView.html">MapView</a></li><li><a href="MapWidgetContainerView.html">MapWidgetContainerView</a></li><li><a href="PredictionView.html">PredictionView</a></li><li><a href="PredictionsListView.html">PredictionsListView</a></li><li><a href="ScaleBarView.html">ScaleBarView</a></li><li><a href="SchemaOrgView.html">SchemaOrgView</a></li><li><a href="SearchInputView.html">SearchInputView</a></li><li><a href="SearchView.html">SearchView</a></li><li><a href="ShareUrlView.html">ShareUrlView</a></li><li><a href="ToolbarView.html">ToolbarView</a></li><li><a href="VectorFilterView.html">VectorFilterView</a></li><li><a href="ViewfinderView.html">ViewfinderView</a></li><li class='category-heading' data-category='Views/Maps/Legend'>Views/Maps/Legend</li><li><a href="CategoricalSwatchView.html">CategoricalSwatchView</a></li><li><a href="ContinuousSwatchView.html">ContinuousSwatchView</a></li><li><a href="LayerLegendView.html">LayerLegendView</a></li><li><a href="LegendContainerView.html">LegendContainerView</a></li><li class='category-heading' data-category='Views/Maps/Viewfinder'>Views/Maps/Viewfinder</li><li><a href="ExpansionPanelView.html">ExpansionPanelView</a></li><li><a href="ZoomPresetView.html">ZoomPresetView</a></li><li><a href="ZoomPresetsListView.html">ZoomPresetsListView</a></li><li class='category-heading' data-category='Views/Metadata'>Views/Metadata</li><li><a href="AutofillAttributesView.html">AutofillAttributesView</a></li><li><a href="EML211EditorView.html">EML211EditorView</a></li><li><a href="EMLAttributeView.html">EMLAttributeView</a></li><li><a href="EMLAttributesView.html">EMLAttributesView</a></li><li><a href="EMLEntityView.html">EMLEntityView</a></li><li><a href="EMLMeasurementScaleView.html">EMLMeasurementScaleView</a></li><li><a href="EMLMeasurementTypeView.html">EMLMeasurementTypeView</a></li><li><a href="EMLMethodsView.html">EMLMethodsView</a></li><li><a href="EMLMissingValueCodeView.html">EMLMissingValueCodeView</a></li><li><a href="EMLMissingValueCodesView.html">EMLMissingValueCodesView</a></li><li><a href="EMLOtherEntityView.html">EMLOtherEntityView</a></li><li><a href="EMLPartyView.html">EMLPartyView</a></li><li><a href="EMLTempCoverageView.html">EMLTempCoverageView</a></li><li><a href="EMLView.html">EMLView</a></li><li><a href="EMlGeoCoverageView_.html">EMlGeoCoverageView</a></li><li><a href="ScienceMetadataView.html">ScienceMetadataView</a></li><li class='category-heading' data-category='Views/Ontologies'>Views/Ontologies</li><li><a href="BioontologyBrowser.html">BioontologyBrowser</a></li><li class='category-heading' data-category='Views/Portals'>Views/Portals</li><li><a href="PortalDataView.html">PortalDataView</a></li><li><a href="PortalHeaderView.html">PortalHeaderView</a></li><li><a href="PortalListView.html">PortalListView</a></li><li><a href="PortalLogosView.html">PortalLogosView</a></li><li><a href="PortalMembersView.html">PortalMembersView</a></li><li><a href="PortalSectionView.html">PortalSectionView</a></li><li><a href="PortalUsagesView.html">PortalUsagesView</a></li><li><a href="PortalView.html">PortalView</a></li><li><a href="PortalVisualizationsView.html">PortalVisualizationsView</a></li><li><a href="PortalsSearchView.html">PortalsSearchView</a></li><li class='category-heading' data-category='Views/Portals/Editor'>Views/Portals/Editor</li><li><a href="PortEditorDataView.html">PortEditorDataView</a></li><li><a href="PortEditorImageView.html">PortEditorImageView</a></li><li><a href="PortEditorLogosView.html">PortEditorLogosView</a></li><li><a href="PortEditorMdSectionView.html">PortEditorMdSectionView</a></li><li><a href="PortEditorSectionView.html">PortEditorSectionView</a></li><li><a href="PortEditorSectionsView.html">PortEditorSectionsView</a></li><li><a href="PortEditorSettingsView.html">PortEditorSettingsView</a></li><li><a href="PortalEditorView.html">PortalEditorView</a></li><li class='category-heading' data-category='Views/Projects'>Views/Projects</li><li><a href="ProjectView.html">ProjectView</a></li><li class='category-heading' data-category='Views/QueryBuilder'>Views/QueryBuilder</li><li><a href="QueryBuilderView.html">QueryBuilderView</a></li><li><a href="QueryRuleView.html">QueryRuleView</a></li><li class='category-heading' data-category='Views/Search'>Views/Search</li><li><a href="SearchResultsPagerView.html">SearchResultsPagerView</a></li><li><a href="SearchResultsView.html">SearchResultsView</a></li><li><a href="SorterView.html">SorterView</a></li><li class='category-heading' data-category='Views/SearchSelect'>Views/SearchSelect</li><li><a href="AccountSelectView.html">AccountSelectView</a></li><li><a href="AnnotationFilter.html">AnnotationFilter</a></li><li><a href="BioontologySelectView.html">BioontologySelectView</a></li><li><a href="NodeSelect.html">NodeSelect</a></li><li><a href="ObjectFormatSelect.html">ObjectFormatSelect</a></li><li><a href="QueryFieldSelectView.html">QueryFieldSelectView</a></li><li><a href="SearchSelectView.html">SearchSelectView</a></li><li><a href="SeparatorView.html">SeparatorView</a></li><li class='category-heading' data-category='Views/UIElements'>Views/UIElements</li><li><a href="ToggleView.html">ToggleView</a></li><li><a href="EMLTaxonView.html">EMLTaxonView</a></li><li><a href="EventLog.html">EventLog</a></li><li><a href="SystemMetadata.html">SystemMetadata</a></li><li class='category-heading' data-category='Deprecated'>Deprecated</li><li><a href="AnnotatorView.html">AnnotatorView</a></li><li><a href="ExternalView.html">ExternalView</a></li><li><a href="LogsSearch.html">LogsSearch</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addClassesFromResponse">addClassesFromResponse</a></li><li><a href="global.html#addFields">addFields</a></li><li><a href="global.html#addSelected">addSelected</a></li><li><a href="global.html#adjustDescriptionLength">adjustDescriptionLength</a></li><li><a href="global.html#appConfigPath">appConfigPath</a></li><li><a href="global.html#buildChildrenUrl">buildChildrenUrl</a></li><li><a href="global.html#buildSearchUrl">buildSearchUrl</a></li><li><a href="global.html#canChangeSeparator">canChangeSeparator</a></li><li><a href="global.html#changeSubmenuOnSearch">changeSubmenuOnSearch</a></li><li><a href="global.html#couldBeLatLong">couldBeLatLong</a></li><li><a href="global.html#createBatchPayload">createBatchPayload</a></li><li><a href="global.html#createHeaders">createHeaders</a></li><li><a href="global.html#defaults">defaults</a></li><li><a href="global.html#encodeIfPresent">encodeIfPresent</a></li><li><a href="global.html#excludeFields">excludeFields</a></li><li><a href="global.html#fetchClasses">fetchClasses</a></li><li><a href="global.html#fetchClassesFromOntology">fetchClassesFromOntology</a></li><li><a href="global.html#fetchFromOntologies">fetchFromOntologies</a></li><li><a href="global.html#fetchQueryFields">fetchQueryFields</a></li><li><a href="global.html#fieldToOption">fieldToOption</a></li><li><a href="global.html#filterClassesToFetch">filterClassesToFetch</a></li><li><a href="global.html#finalizeFetch">finalizeFetch</a></li><li><a href="global.html#formatResult">formatResult</a></li><li><a href="global.html#formatResults">formatResults</a></li><li><a href="global.html#generateGeoJSONPoint">generateGeoJSONPoint</a></li><li><a href="global.html#generateGeoJSONPolygon">generateGeoJSONPolygon</a></li><li><a href="global.html#generateGeoJSONString">generateGeoJSONString</a></li><li><a href="global.html#generateIdentifier">generateIdentifier</a></li><li><a href="global.html#generateSpatialCoverage">generateSpatialCoverage</a></li><li><a href="global.html#getAccountDetails">getAccountDetails</a></li><li><a href="global.html#getCachedClasses">getCachedClasses</a></li><li><a href="global.html#getCategoryNames">getCategoryNames</a></li><li><a href="global.html#getChildren">getChildren</a></li><li><a href="global.html#getClasses">getClasses</a></li><li><a href="global.html#getDOIURL">getDOIURL</a></li><li><a href="global.html#getIncludeParam">getIncludeParam</a></li><li><a href="global.html#getNextPage">getNextPage</a></li><li><a href="global.html#getNextSeparator">getNextSeparator</a></li><li><a href="global.html#getOptionByLabelOrValue">getOptionByLabelOrValue</a></li><li><a href="global.html#getOptionsByCategory">getOptionsByCategory</a></li><li><a href="global.html#getQueryFieldOptions">getQueryFieldOptions</a></li><li><a href="global.html#getSelectedModels">getSelectedModels</a></li><li><a href="global.html#hasInvalidSelections">hasInvalidSelections</a></li><li><a href="global.html#initialize">initialize</a></li><li><a href="global.html#initializeFetch">initializeFetch</a></li><li><a href="global.html#isValidValue">isValidValue</a></li><li><a href="global.html#model">model</a></li><li><a href="global.html#moveClassesToNotFound">moveClassesToNotFound</a></li><li><a href="global.html#optionsAsJSON">optionsAsJSON</a></li><li><a href="global.html#padDescription">padDescription</a></li><li><a href="global.html#parse">parse</a></li><li><a href="global.html#recordError">recordError</a></li><li><a href="global.html#removeSelected">removeSelected</a></li><li><a href="global.html#renameCategory">renameCategory</a></li><li><a href="global.html#reset">reset</a></li><li><a href="global.html#resetPageInfo">resetPageInfo</a></li><li><a href="global.html#responseAsync">responseAsync</a></li><li><a href="global.html#restoreTypes">restoreTypes</a></li><li><a href="global.html#separatorRequired">separatorRequired</a></li><li><a href="global.html#serialize">serialize</a></li><li><a href="global.html#setAddedFieldDetails">setAddedFieldDetails</a></li><li><a href="global.html#setDataCatalogSchema">setDataCatalogSchema</a></li><li><a href="global.html#setDatasetSchema">setDatasetSchema</a></li><li><a href="global.html#setNextSeparator">setNextSeparator</a></li><li><a href="global.html#setOptionsForPreselected">setOptionsForPreselected</a></li><li><a href="global.html#setSchema">setSchema</a></li><li><a href="global.html#setSchemaFromTemplate">setSchemaFromTemplate</a></li><li><a href="global.html#setSelected">setSelected</a></li><li><a href="global.html#sortByProp">sortByProp</a></li><li><a href="global.html#sortFields">sortFields</a></li><li><a href="global.html#toAccordionItem">toAccordionItem</a></li><li><a href="global.html#toJSON">toJSON</a></li><li><a href="global.html#toSearchSelectOption">toSearchSelectOption</a></li><li><a href="global.html#truncateDescription">truncateDescription</a></li><li><a href="global.html#updateOptions">updateOptions</a></li><li><a href="global.html#url">url</a></li><li><a href="global.html#waitForFetchComplete">waitForFetchComplete</a></li></ul>
</nav>

<div id="main">

    <h1 class="page-title">Source: src/js/models/maps/assets/MapAsset.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";

define([
  "underscore",
  "backbone",
  "models/portals/PortalImage",
  "models/maps/AssetColorPalette",
  "common/IconUtilities",
  "common/SearchParams",
  `${MetacatUI.root}/components/dayjs.min.js`,
], (
  _,
  Backbone,
  PortalImage,
  AssetColorPalette,
  IconUtilities,
  SearchParams,
  dayjs,
) => {
  /**
   * @classdesc A MapAsset Model comprises information required to fetch source data for
   * some asset or resource that is displayed in a map, such as imagery (raster) tiles,
   * vector data, a 3D tileset, or a terrain model. This model also contains metadata
   * about the source data, like an attribution and a description. It represents the
   * most generic type of asset, and can be extended to support specific assets that are
   * compatible with a given map widget.
   * @classcategory Models/Maps/Assets
   * @class MapAsset
   * @name MapAsset
   * @augments Backbone.Model
   * @since 2.18.0
   * @class
   */
  const MapAsset = Backbone.Model.extend(
    /** @lends MapAsset.prototype */ {
      /**
       * The name of this type of model
       * @type {string}
       */
      type: "MapAsset",

      /**
       * Default attributes for MapAsset models
       * @name MapAsset#defaults
       * @type {object}
       * @property {('Cesium3DTileset'|'BingMapsImageryProvider'|'IonImageryProvider'|'WebMapTileServiceImageryProvider'|'TileMapServiceImageryProvider'|'CesiumTerrainProvider')} type
       * The format of the data. Must be one of the supported types.
       * @property {string} label A user friendly name for this asset, to be displayed
       * in a map.
       * @property {string} [icon] A PID for an SVG saved as a dataObject, or an SVG
       * string. The SVG will be used as an icon that will be displayed next to the label
       * in the layers list. It should be an SVG file that has no fills, borders, or styles
       * set on it (since the icon will be shaded dynamically by the maps CSS using a fill
       * attribute). It must use a viewbox property rather than a height and width. When
       * not specified, a layer icon is used as default.
       * @property {string} [description = ''] A brief description about the asset, e.g.
       * which area it covers, the resolution, etc.
       * @property {string} [attribution = ''] A credit or attribution to display along
       * with this map resource.
       * @property {string} [moreInfoLink = ''] A link to show in a map where a user can
       * find more information about this resource.
       * @property {string} [downloadLink = ''] A link to show in a map where a user can
       * go to download the source data.
       * @property {string} [id = ''] If this asset's data is archived in a DataONE
       * repository, the ID of the data package.
       * @property {boolean} [selected = false] Set to true when this asset has been
       * selected by the user in the layer list.
       * @property {number} [opacity = 1] A number between 0 and 1 indicating the
       * opacity of the layer on the map, with 0 representing fully transparent and 1
       * representing fully opaque. This applies to raster (imagery) and vector assets,
       * not to terrain assets.
       * @property {number} [saturation = 1] A number that indicates the saturation of
       * the layer on the map. Less than 1.0 reduces the saturation while greater than
       * 1.0 increases it. This applies to raster (imagery) only.
       * @property {boolean} [visible = true] Set to true if the layer is visible on the
       * map, false if it is hidden. This applies to raster (imagery) and vector assets,
       * not to terrain assets.
       * @property {boolean} [configuredVisibility = true] Tracks the original
       * visibility value according to the portal configuration and ignoring any
       * search query parameters in the URL which can affect the layer's initial
       * visibility.
       * @property {boolean} [originalVisibility = true] Tracks the original
       * visibility value according to search query parameters and portal
       * configuration.
       * @property {AssetColorPalette} [colorPalette] The color or colors mapped to
       * attributes of this asset. This applies to raster/imagery and vector assets. For
       * imagery, the colorPalette will be used to create a legend. For vector assets
       * (e.g. 3Dtilesets), it will also be used to style the features.
       * @property {MapConfig#FeatureTemplate} [featureTemplate] Configuration for
       * content and layout of the Feature Info panel - the panel that shows information
       * about a selected feature from a vector asset ({@link FeatureInfoView}).
       * @property {Cesium.Entity|Cesium.Cesium3DTilesetFeature} [featureType] For vector
       * and 3d tileset assets, the object type that cesium uses to represent features
       * from the asset. Null for imagery and terrain assets.
       * @property {MapConfig#CustomProperties} [customProperties] Configuration that
       * allows for the definition of custom feature properties, potentially based on
       * other properties. For example, a custom property could be a formatted version
       * of an existing date property.
       * @property {MapConfig#Notification} [notification] A custom badge and message to
       * display about the layer in the Layer list. For example, this could highlight
       * the layer if it is new, give a warning if they layer is under development, etc.
       * @property {'ready'|'error'|null} [status = null] Set to 'ready' when the
       * resource is loaded and ready to be rendered in a map view. Set to 'error' when
       * the asset is not supported, or there was a problem requesting the resource.
       * @property {string} [statusDetails = null] Any further details about the status,
       * especially when there was an error.
       * @property {boolean} [hideInLayerList = false] Set to true to hide this asset
       * from the layer list.
       * @property {boolean} [showOpacitySlider = true] Set to true to show opacity slider
       * for the layer.
       * @property {"showDetails"|"zoom"} [clickFeatureAction = null] The action to take when a user clicks on a feature on the layer. The
       * available options are "showDetails" (show the feature details in the
       * sidebar) or "zoom" (zoom to the feature's location).
       */
      defaults() {
        return {
          type: "",
          label: "",
          icon: '&lt;svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">&lt;path d="m3.2 7.3 8.6 4.6a.5.5 0 0 0 .4 0l8.6-4.6a.4.4 0 0 0 0-.8L12.1 3a.5.5 0 0 0-.4 0L3.3 6.5a.4.4 0 0 0 0 .8Z">&lt;/path>&lt;path d="M20.7 10.7 19 9.9l-6.7 3.6a.5.5 0 0 1-.4 0L5 9.9l-1.8.8a.5.5 0 0 0 0 .8l8.5 5a.5.5 0 0 0 .5 0l8.5-5a.5.5 0 0 0 0-.8Z">&lt;/path>&lt;path d="m20.7 15.1-1.5-.7-7 3.8a.5.5 0 0 1-.4 0l-7-3.8-1.5.7a.5.5 0 0 0 0 .9l8.5 5a.5.5 0 0 0 .5 0l8.5-5a.5.5 0 0 0 0-.9Z">&lt;/path>&lt;/svg>',
          description: "",
          attribution: "",
          moreInfoLink: "",
          downloadLink: "",
          selected: false,
          opacity: 1,
          saturation: 1,
          visible: true,
          configuredVisibility: true,
          originalVisibility: true,
          colorPalette: null,
          customProperties: {},
          featureTemplate: {},
          featureType: null,
          notification: {},
          status: null,
          statusDetails: null,
          hideInLayerList: false,
          showOpacitySlider: true,
          clickFeatureAction: null,
        };
      },

      /**
       * The source of a specific asset (i.e. layer or terrain data) to show on the map,
       * as well as metadata and display properties of the asset. Some properties listed
       * here do not apply to all asset types, but this is specified in the property
       * description.
       * @typedef {object} MapAssetConfig
       * @name MapConfig#MapAssetConfig
       * @property {('Cesium3DTileset'|'BingMapsImageryProvider'|'IonImageryProvider'|'WebMapTileServiceImageryProvider'|'WebMapServiceImageryProvider'|'TileMapServiceImageryProvider'|'NaturalEarthII'|'CesiumTerrainProvider'|'GeoJsonDataSource'|'USGSImageryTopo'|'OpenStreetMapImageryProvider')} type -
       * A string indicating the format of the data. Some of these types correspond
       * directly to Cesium classes. The NaturalEarthII type is a special imagery layer
       * that automatically sets the cesiumOptions to load the Natural Earth II imagery
       * that is shipped with Cesium/MetacatUI. If this type is set, then no other
       * cesiumOptions are required. The same is true for USGSImageryTopo, which pulls
       * imagery directly from USGS.
       * @property {(Cesium3DTileset#cesiumOptions|CesiumImagery#cesiumOptions|CesiumTerrain#cesiumOptions|CesiumVectorData#cesiumOptions)} [cesiumOptions] -
       * For MapAssets that are configured for Cesium, like
       * Cesium3DTilesets, an object with options to pass to the Cesium constructor
       * function that creates the Cesium model. Options are specific to each type of
       * asset. For details, see documentation for each of the types.
       * @property {string} label - A user friendly name for this asset, to be displayed
       * in a map.
       * @property {string} [icon] - A PID for an SVG saved as a dataObject, or an SVG
       * string. The SVG will be used as an icon that will be displayed next to the
       * label in the layers list. It should be an SVG file that has no fills, borders,
       * or styles set on it (since the icon will be shaded dynamically by the maps CSS
       * using a fill attribute). It must use a viewbox property rather than a height
       * and width.
       * @property {number} [opacity=1] - A number between 0 and 1 indicating the
       * opacity of the layer on the map, with 0 representing fully transparent and 1
       * representing fully opaque. This applies to raster (imagery) and vector assets,
       * not to terrain assets.
       * @property {number} [saturation=1] - A number that indicates the saturation of
       * the layer on the map. Less than 1.0 reduces the saturation while greater than
       * 1.0 increases it. This applies to raster (imagery) only.
       * @property {boolean} [visible=true] - Set to true if the layer is visible on the
       * map, false if it is hidden. This applies to raster (imagery) and vector assets,
       * not to terrain assets.
       * @property {string} [description] - A brief description about the asset, e.g.
       * which area it covers, the resolution, etc.
       * @property {string} [attribution] A credit or attribution to display along with
       * this asset.
       * @property {string} [moreInfoLink] A complete URL used to create a link to show
       * in a map where a user can find more information about this resource.
       * @property {string} [downloadLink]  A complete URL used to show a link in a map
       * where a user can go to download the source data.
       * @property {string} [id] If this asset's data is archived in a DataONE
       * repository, the ID of the data package.
       * @property {MapConfig#ColorPaletteConfig} [colorPalette] The color or colors
       * mapped to attributes of this asset. This applies to raster/imagery and vector
       * assets. For imagery, the colorPalette will be used to create a legend. For
       * vector assets (e.g. 3Dtilesets), it will also be used to style the features.
       * @property {MapConfig#FeatureTemplate} [featureTemplate] Configuration for the
       * content and layout of the Feature Info panel ({@link FeatureInfoView}) - the
       * panel that shows information about a selected feature from a vector asset. If
       * no feature template is set, then the default table layout is used.
       * @property {MapConfig#CustomProperties} [customProperties] Definitions of custom
       * properties of features, potentially based on existing properties. For example,
       * a custom property could be a formatted version of another date property. These
       * custom properties can be used in the filters, colorPalette, or featureTemplate.
       * So far, custom strings and formatted dates are supported. Eventually, the
       * custom properties may be expanded to support formatted numbers and booleans.
       * @property {MapConfig#VectorFilterConfig} [filters] - A set of conditions used
       * to show or hide specific features of this tileset.
       * @property {MapConfig#Notification} [notification] A custom badge and message to
       * display about the layer in the Layer list. For example, this could highlight
       * the layer if it is new, give a warning if they layer is under development, etc.
       * @property {boolean} [hideInLayerList] - Set to true to hide this asset from the
       * layer list.
       */

      /**
       * A feature template configures the format and content of information displayed
       * in the Feature Info panel ({@link FeatureInfoView}). The Feature Info panel is
       * displayed in a map when a user clicks on a vector feature in a map.
       * @typedef {object} FeatureTemplate
       * @name MapConfig#FeatureTemplate
       * @since 2.19.0
       * @property {'story'|'table'} [template='table'] The name/ID of the template to
       * use. This must match the name of one of the templates available in
       * {@link FeatureInfoView#contentTemplates}.
       * @property {string} [label] Sets which of the feature properties to use as the
       * title for the FeatureInfoView. The string must exactly match the key for a
       * property that exists in the feature.
       * @property {MapConfig#StoryTemplateOptions} [options] A list of key-value pairs
       * that map the template variable to a property/attribute of the the feature. Keys
       * are the template variable names and values are the names of properties in the
       * feature. Template variable names are specific to each template. Currently only
       * the 'story' template allows variables. These are specified in the
       * {@link FeatureInfoView#contentTemplates}.
       * @example
       * // Use the "story" template, which shows a secondary title, image, description,
       * // and link.
       * {
       *   "template": "story",
       *   "label": "title",
       *   "options": {
       *     "subtitle": "formattedDate",
       *     "description": "summary",
       *     "thumbnail": "imageSrc",
       *     "url": "newsLink",
       *     "urlText": "newsTitle",
       *   }
       * }
       * @example
       * // Use the default template (a table), but use the "forestName" attribute for
       * // the FeatureInfo panel label
       * {
       *   "label": "forestName"
       * }
       */

      /**
       * An object that maps template variable to feature properties for the "story"
       * template.
       * @typedef {object} StoryTemplateOptions
       * @name MapConfig#StoryTemplateOptions
       * @since 2.19.0
       * @property {string} subtitle The name of a feature property to use for a
       * secondary title in the template
       * @property {string} description The name of a feature property that contains a
       * brief summary or description of the feature; displayed as a paragraph.
       * @property {string} thumbnail The name of a feature property that contains a URL
       * for an image. Displayed as a thumbnail next to the description.
       * @property {string} url The name of a feature property with a URL to use to
       * create a link (e.g. to learn more information about the given feature)
       * @property {string} urlText The name of a feature property that has text to
       * display for the url. Defaults to 'Read More' if none is set.
       */

      /**
       * An object where the keys indicate the name/ID of the new custom property to
       * create, and the values are an object that defines the new property.
       * @typedef {{string: (MapConfig#CustomDateProperty|MapConfig#CustomStringProperty)}} CustomProperties
       * @name MapConfig#CustomProperties
       * @since 2.19.0
       * @example
       * {
       *   "year": {
       *     "type": "date",
       *     "property": "dateTime",
       *     "format": "YYYY",
       *   },
       *   "urlText": {
       *     "type": "string",
       *     "value": "Click here to learn more about this feature"
       *   }
       * }
       */

      /**
       * An object that defines a formatted date to use as a property in a feature. Used
       * in the {@link MapConfig#CustomProperties} object.
       * @typedef {object} CustomDateProperty
       * @name MapConfig#CustomDateProperty
       * @since 2.19.0
       * @property {'date'} type Must be set to 'date' to indicate that this is a custom
       * date property
       * @property {string} property The name/ID of the existing date property to format
       * @property {string} format A string that indicates the new format to use.
       * Follows the syntax used by Day.JS, see
       * {@link https://day.js.org/docs/en/display/format}
       */

      /**
       * An object that defines a custom string to use as a property in a feature. Used
       * in the {@link MapConfig#CustomProperties} object.
       * @typedef {object} CustomStringProperty
       * @name MapConfig#CustomStringProperty
       * @since 2.19.0
       * @property {'string'} type Must be set to 'string' to indicate that this is a
       * custom string property
       * @property {string} value The new string to use. So far only static strings are
       * available. In the future, templates that include other properties may be
       * supported.
       */

      /**
       * A notification displays a badge in the {@link LayerListView} and a message in
       * the {@link LayerDetailsView}. This is useful for indicating some special status
       * of the layer: "new", "under development", etc.
       * @typedef {object} Notification
       * @name MapConfig#Notification
       * @since 2.22.0
       * @property {'yellow'|'green'|'blue'|'contrast'} [style] - The badge and message
       * color. If none is set, then notification elements will be similar to the
       * background colour (subtle).
       * @property {string} badge - The text to display in the badge element next to the
       * layer label in the list. This badge should be as few characters as possible.
       * @property {string} message - A longer message to display explaining the status.
       */

      /**
       * Executed when a new MapAsset model is created.
       * @param {MapConfig#MapAssetConfig} [assetConfig] The initial values of the
       * attributes, which will be set on the model.
       */
      initialize(assetConfig) {
        const model = this;

        const assetConfigCopy =
          !assetConfig || typeof assetConfig !== "object" ? {} : assetConfig;

        // Set the color palette
        if (assetConfigCopy.colorPalette) {
          this.set(
            "colorPalette",
            new AssetColorPalette(assetConfigCopy.colorPalette),
          );
        }

        // Fetch the icon, if there is one
        if (assetConfigCopy.icon) {
          try {
            if (IconUtilities.isSVG(assetConfigCopy.icon)) {
              model.updateIcon(assetConfigCopy.icon);
            } else {
              model.set("iconStatus", "fetching");
              // If the string is not an SVG then assume it is a PID and try to fetch
              // the SVG file.
              IconUtilities.fetchIcon(assetConfigCopy.icon).then((icon) =>
                model.updateIcon(icon),
              );
            }
          } catch (error) {
            model.set("iconStatus", "error");
          }
        }

        this.on("change:visible", () => {
          if (!this.get("mapModel")?.get("showShareUrl")) return;

          this.get("mapModel")
            .get("allLayers")
            .forEach((layer) => {
              const layerId = layer.get("layerId");
              if (layerId &amp;&amp; layer.get("visible")) {
                SearchParams.addEnabledLayer(layerId);
              } else {
                SearchParams.removeEnabledLayer(layerId);
              }
            });
        });

        this.setListeners();
      },

      /**
       * Set an error status and message for this asset.
       * @param {object | string} error - An error object with a status code
       * attribute or or string with details about the error.
       * @since 2.27.0
       */
      setError(error) {
        // See https://cesium.com/learn/cesiumjs/ref-doc/RequestErrorEvent.html
        let details = error;
        // Write a helpful error message
        switch (error.statusCode) {
          case 404:
            details = "The resource was not found (error code 404).";
            break;
          case 500:
            details = "There was a server error (error code 500).";
            break;
          default:
        }
        this.set("status", "error");
        this.set("statusDetails", details);
      },

      /**
       * Set a ready status for this asset.
       * @since 2.27.0
       */
      setReady() {
        this.set("status", "ready");
        this.set("statusDetails", null);
      },

      /**
       * When the asset can't be loaded, hide it from the map and show an error.
       * @since 2.27.0
       */
      handleError() {
        this.set("visible", false);
        this.stopListening(this, "change:visible");
      },

      /**
       * Set all of the listeners for this model
       * @since 2.27.0
       */
      setListeners() {
        const status = this.get("status");
        if (status === "error") {
          this.handleError();
          return;
        }

        const vis = this.get("originalVisibility");
        if (typeof vis === "boolean") {
          this.set("visible", vis);
        }

        // The map asset cannot be visible on the map if there was an error
        // loading the asset
        this.stopListening(this, "change:status");
        this.listenTo(this, "change:status", this.setListeners);

        // Listen for changes to the cesiumOptions object
        this.stopListening(this, "change:cesiumOptions");
        this.listenTo(this, "change:cesiumOptions", () => {
          this.createCesiumModel(true);
        });

        // When any filter models in the filters collection change, then trigger
        // an event on the asset model that allows models &amp; views to easily
        // react to filter changes, including replacement of the filter
        // collection itself.
        this.stopListening(this.get("filters"), "change");
        this.listenTo(this.get("filters"), "change", () => {
          this.trigger("change:filters", this);
        });

        this.listenToSelectedFeatures();
      },

      /**
       * Update the appearance of features from this asset when they are
       * selected or deselected in the map widget.
       * @since 2.27.0
       */
      listenToSelectedFeatures() {
        if (typeof this.updateAppearance !== "function") {
          return;
        }

        const mapModel = this.get("mapModel");
        if (!mapModel) {
          this.listenToOnce(
            this,
            "change:mapModel",
            this.listenToSelectedFeatures,
          );
          return;
        }

        const interactions = mapModel.get("interactions");

        if (!interactions) {
          this.listenToOnce(
            mapModel,
            "change:interactions",
            this.listenToSelectedFeatures,
          );
          return;
        }

        const selectedFeatures = mapModel.getSelectedFeatures();

        if (selectedFeatures) {
          this.stopListening(selectedFeatures, "update");
          this.listenTo(selectedFeatures, "update", this.updateAppearance);
        }

        // Reset the listeners if the selectedFeatures collection or the
        // interactions model is replaced
        this.listenToOnce(interactions, "change:selectedFeatures", () => {
          this.updateAppearance();
          this.listenToSelectedFeatures();
        });

        this.listenToOnce(mapModel, "change:interactions", () => {
          this.updateAppearance();
          this.listenToSelectedFeatures();
        });
      },

      /**
       * Get the asset config's cesiumOptions, if it has any. This will return
       * a copy of the cesiumOptions object, so that changes made to the
       * returned object will not affect the original cesiumOptions object.
       * @returns {object} A copy of the cesiumOptions object, or null if there
       * are no cesiumOptions.
       * @since 2.26.0
       */
      getCesiumOptions() {
        const cesiumOptions = this.get("cesiumOptions");
        if (!cesiumOptions) {
          return null;
        }
        return JSON.parse(JSON.stringify(cesiumOptions));
      },

      /**
       * Given a feature object from a Feature model, checks if it is part of the
       * selectedFeatures collection. See featureObject property from
       * {@link Feature#defaults}. For vector and 3d tile models only.
       * @param {*} feature - An object that a Map widget uses to represent this feature
       * in the map, e.g. a Cesium.Entity or a Cesium.Cesium3DTileFeature
       * @returns {boolean} Returns true if the given feature is part of the
       * selectedFeatures collection in this asset
       */
      featureIsSelected(feature) {
        const map = this.get("mapModel");
        if (!map) {
          return false;
        }
        const selectedFeatures = map.getSelectedFeatures();
        if (!selectedFeatures) {
          return false;
        }
        const isSelected = selectedFeatures.containsFeature(feature);
        return isSelected;
      },

      /**
       * Checks if a feature from the map (a Cesium object) is the type of
       * feature that this map asset model contains. For example, if a
       * Cesium3DTilesetFeature is passed to this function, this function
       * will return true if it is a Cesium3DTileset model, and false if it
       * is a CesiumVectorData model.
       * @param {Cesium.Cesium3DTilesetFeature|Cesium.Entity} feature feature to be checked.
       * @returns {boolean} true if the feature is an instance of the feature
       * type set on the asset model, false otherwise.
       * @since 2.25.0
       */
      usesFeatureType(feature) {
        const ft = this.get("featureType");
        if (!feature || !ft) return false;
        if ((!feature) instanceof ft) return false;
        return true;
      },

      /**
       * Given a feature object from a Feature model, checks if it is part of the
       * selectedFeatures collection. See featureObject property from
       * {@link Feature#defaults}. For vector and 3d tile models only.
       * @param {*} feature - An object that a Map widget uses to represent this feature
       * in the map, e.g. a Cesium.Entity or a Cesium.Cesium3DTileFeature
       * @returns {boolean} Returns true if the given feature is part of the
       * selectedFeatures collection in this asset
       * @since 2.25.0
       */
      containsFeature(feature) {
        if (!this.usesFeatureType(feature)) return false;
        if (!this.getCesiumModelFromFeature) return false;
        const cesiumModel = this.getCesiumModelFromFeature(feature);
        if (!cesiumModel) return false;
        if (this.get("cesiumModel") === cesiumModel) return true;
        return false;
      },

      /**
       * Given a feature object from a Feature model, returns the attributes
       * needed to create a Feature model. For vector and 3d tile models only.
       * @param {*} feature - An object that a Map widget uses to represent this feature
       * in the map, e.g. a Cesium.Entity or a Cesium.Cesium3DTileFeature
       * @returns {object} An object with properties, mapAsset, featureID, featureObject,
       * and label properties. Returns null if the feature is not the correct type
       * for this asset model.
       */
      getFeatureAttributes(feature) {
        if (!this.usesFeatureType(feature)) return null;
        if (!this.getCesiumModelFromFeature) return null;
        return {
          properties: this.getPropertiesFromFeature(feature),
          mapAsset: this,
          featureID: this.getIDFromFeature(feature),
          featureObject: feature,
          label: this.getLabelFromFeature(feature),
        };
      },

      /**
       * Given a set of properties from a Feature from this Map Asset model, add any
       * custom properties to the properties object and return it.
       * @since 2.19.0
       * @param {object} properties A set of key-value pairs representing the existing
       * properties of a feature from this asset.
       * @returns {object} The properties object with any custom properties added.
       */
      addCustomProperties(properties) {
        const model = this;
        const customProperties = model.get("customProperties");
        const formattedProperties = {};

        if (!customProperties || !Object.keys(customProperties).length) {
          return properties;
        }

        const propertiesCopy =
          properties &amp;&amp; typeof properties === "object" ? properties : {};

        if (customProperties) {
          _.each(customProperties, (config, key) => {
            let formattedValue = "";
            if (config.type === "date") {
              formattedValue = model.formatDateProperty(config, propertiesCopy);
              // TODO: support formatted numbers and booleans...
              // } else if (config.type === 'number') {
              //   formattedValue = model.formatNumberProperty(config, properties)
              // } else if (config.type === 'boolean') {
              //   formattedValue = model.formatBooleanProperty(config, properties)
            } else {
              formattedValue = model.formatStringProperty(config);
            }
            formattedProperties[key] = formattedValue;
          });
        }
        // merge the properties with the formatted properties
        return Object.assign(propertiesCopy, formattedProperties);
      },

      /**
       * Given a definition for a new date property, and the properties that already
       * exist on a specific feature, returns a new string with the formatted date.
       * @since 2.19.0
       * @param {MapConfig#CustomDateProperty} config - An object that defines the new
       * date property to create
       * @param {object} properties key-value pairs representing existing properties in
       * a Feature
       * @returns {string} The value for the new date property, formatted as defined by
       * config, for the given feature
       */
      formatDateProperty(config, properties) {
        const propertiesCopy = properties || {};
        let formattedDate = "";
        if (!config || !config.format) {
          return formattedDate;
        }
        const value = propertiesCopy[config.property];
        if (value) {
          formattedDate = dayjs(value).format(config.format);
        }
        return formattedDate;
      },

      /**
       * For a given set of Feature properties and a definition for a new sting
       * property, returns the value of the custom property. Note that since only static
       * strings are supported so far, this function essentially just returns the value
       * of config.value. This function exists to allow support of dynamic strings in
       * the future (e.g. combining strings from existing properties)
       * @since 2.19.0
       * @param {MapConfig#CustomStringProperty} config The object the defines the new
       * custom property
       * @returns {string} The new string for the given Feature property
       */
      formatStringProperty(config) {
        let formattedString = "";
        if (!config || !config.value) {
          return formattedString;
        }
        formattedString = config.value;
        return formattedString;
      },

      // formatNumberProperty: function (config, properties) {
      //   try {
      //     if (!properties) {
      //       properties = {}
      //     }
      //     let formattedNumber = ''
      //     // TODO...
      //   }
      //   catch (error) {
      //     console.log(
      //       'There was an error formatting a number for a Feature model' +
      //       '. Error details: ' + error
      //     );
      //     return '';
      //   }
      // },

      // formatBooleanProperty: function (config, properties) {
      //   try {
      //     if (!properties) {
      //       properties = {}
      //     }
      //     let formattedBoolean = ''
      //     // TODO...
      //   }
      //   catch (error) {
      //     console.log(
      //       'There was an error formatting a boolean for a Feature model' +
      //       '. Error details: ' + error
      //     );
      //     return '';
      //   }
      // },

      /**
       * Sanitizes an SVG string and updates the model's 'icon' attribute the sanitized
       * string. Also sets the 'iconStatus' attribute to 'success'.
       * @param {string} icon An SVG string to use for the MapAsset icon
       */
      updateIcon(icon) {
        if (!icon) return;

        this.set("icon", IconUtilities.sanitizeIcon(icon));
        this.set("iconStatus", "success");
      },

      /**
       * Resets the Map Asset's status and statusDetails attributes to their default
       * values.
       * @since 2.21.0
       */
      resetStatus() {
        const defaults = this.defaults();
        this.set("status", defaults.status);
        this.set("statusDetails", defaults.statusDetails);
      },

      /**
       * Checks if the asset information has been fetched and is ready to use.
       * @returns {Promise} Returns a promise that resolves to this model when ready.
       */
      whenReady() {
        const model = this;
        return new Promise((resolve) => {
          if (model.get("status") === "ready") {
            resolve(model);
            return;
          }
          model.stopListening(model, "change:status");
          model.listenTo(model, "change:status", () => {
            if (model.get("status") === "ready") {
              model.stopListening(model, "change:status");
              resolve(model);
            }
          });
        });
      },

      /**
       * Given properties of a Feature model from this MapAsset, returns the color
       * associated with that feature.
       * @param {object} properties The properties of the feature to get the color for;
       * An object containing key-value mapping of property names to properties. (See
       * the 'properties' attribute of {@link Feature#defaults}.)
       * @returns {AssetColor#Color} The color associated with the given set of
       * properties.
       */
      getColor(properties) {
        const model = this;
        const colorPalette = model.get("colorPalette");
        return (
          colorPalette?.getColor(properties) ||
          new AssetColorPalette().getDefaultColor()
        );
      },

      /**
       * This function checks whether a feature from the MapAsset is visible on the map
       * based on the properties of the feature and the MapAsset's filter settings.
       * @param {object} properties The properties of the feature to be filtered. (See
       * the 'properties' attribute of {@link Feature#defaults}.)
       * @returns {boolean} Returns true if the feature passes all the filters, or if
       * there are no filters set for this MapAsset. Returns false if the feature fails
       * any of the filters.
       */
      featureIsVisible(properties) {
        const model = this;
        const filters = model.get("filters");
        if (filters &amp;&amp; filters.length) {
          return filters.featureIsVisible(properties);
        }
        return true;
      },

      /**
       * Indicate that the map widget should navigate to a given target from
       * this MapAsset.
       * @param {MapConfig#CameraPosition} target The target to navigate to.
       * @since 2.27.0
       */
      zoomTo(target) {
        this.get("mapModel")?.zoomTo(target);
      },

      /**
       * Checks that the visible attribute is set to true and that the opacity attribute
       * is greater than zero. If both conditions are met, returns true.
       * @returns {boolean} Returns true if the MapAsset has opacity > 0 and is visible.
       */
      isVisible() {
        if (this.get("temporarilyHidden") === true) return false;
        return this.get("visible") &amp;&amp; this.get("opacity") > 0;
      },

      /**
       * Make sure the layer is visible. Sets visibility to true if false, and sets
       * opacity to 0.5 if it's less than 0.05.
       */
      show() {
        // If the opacity is very low, set it to 50%
        if (this.get("opacity") &lt; 0.05) {
          this.set("opacity", 0.5);
        }
        // Make sure the layer is visible
        if (this.get("visible") === false) {
          this.set("visible", true);
        }
      },
    },
  );

  return MapAsset;
});
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
