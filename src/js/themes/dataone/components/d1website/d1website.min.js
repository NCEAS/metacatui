(function(d1Utilities,undefined){d1Utilities.toggleElement=function(button,element,open){try{if(element!==null&&button!==null){button.setAttribute("aria-expanded",!open);element.setAttribute("aria-hidden",open);}}catch(e){console.log("Error toggling the search");console.log(e);}};d1Utilities.throttle=function throttle(fn,wait){var time=Date.now();return function(){if((time+wait-Date.now())<0){fn();time=Date.now();}}};d1Utilities.isMobile=function(){var mobileDesktopBreakpoint=699||700;var winWidth=window.innerWidth||document.documentElement.clientWidth;if(winWidth<mobileDesktopBreakpoint){return true}else{return false}};}(window.d1Utilities=window.d1Utilities||{}));try{(function(d1_globalHeader,undefined){d1_globalHeader.initialize=function(){d1_globalHeader.lastScroll=0;d1_globalHeader.menuButton=document.getElementById("global-menu-toggle");d1_globalHeader.menu=document.getElementById("global-menu");d1_globalHeader.header=document.getElementById("nav");d1_globalHeader.menuExists=d1_globalHeader.menu!==null&&d1_globalHeader.menuButton!==null;var dropdownContainers=document.querySelectorAll(".d1_menu-item--dropdown");d1_globalHeader.dropdownEls=[];dropdownContainers.forEach((container,i)=>{d1_globalHeader.dropdownEls[i]={}
d1_globalHeader.dropdownEls[i].container=container;d1_globalHeader.dropdownEls[i].button=container.querySelector("button");d1_globalHeader.dropdownEls[i].submenu=container.querySelector(".d1_menu-item__sub-menu");});d1_globalHeader.closeDropdownTimeout=0;setListeners();}
var closeAllDropdowns=function(){if(d1_globalHeader.dropdownEls){d1_globalHeader.dropdownEls.forEach(els=>{d1Utilities.toggleElement(els.button,els.submenu,true);});}};var startCloseTimeout=function(){d1_globalHeader.closeDropdownTimeout=setTimeout(()=>closeAllDropdowns(),70);};var stopCloseTimeout=function(){clearTimeout(d1_globalHeader.closeDropdownTimeout);};var dropdownMouseenter=function(els){if(!d1Utilities.isMobile()){stopCloseTimeout();closeAllDropdowns();d1Utilities.toggleElement(els.button,els.submenu,false);}}
var dropdownMouseleave=function(){if(!d1Utilities.isMobile()){startCloseTimeout()}};var dropdownClick=function(els){if(d1Utilities.isMobile()){var open=JSON.parse(els.button.getAttribute("aria-expanded"));closeAllDropdowns();d1Utilities.toggleElement(els.button,els.submenu,open);}};menuButtonClick=function(){if(d1Utilities.isMobile()){var open=JSON.parse(d1_globalHeader.menuButton.getAttribute("aria-expanded"));d1Utilities.toggleElement(d1_globalHeader.menuButton,d1_globalHeader.menu,open);closeAllDropdowns();}};d1_globalHeader.toggleHeader=function(){if(!d1_globalHeader.header||!d1Utilities.isMobile()){return}
const currentScroll=window.pageYOffset;var currentScrollPos=window.pageYOffset;if(currentScroll==0){d1_globalHeader.header.style.bottom="0";return}
if(currentScroll>d1_globalHeader.lastScroll){d1_globalHeader.header.style.bottom="-63px";d1Utilities.toggleElement(d1_globalHeader.menuButton,d1_globalHeader.menu,true);}else if(currentScroll<d1_globalHeader.lastScroll){d1_globalHeader.header.style.bottom="0";}
d1_globalHeader.lastScroll=currentScrollPos;}
const setListeners=function(){window.removeEventListener("load",function(e){if(!d1Utilities.isMobile()){d1Utilities.toggleElement(d1_globalHeader.menuButton,d1_globalHeader.menu,false)}},false);window.addEventListener("load",function(e){if(!d1Utilities.isMobile()){d1Utilities.toggleElement(d1_globalHeader.menuButton,d1_globalHeader.menu,false)}},false);window.addEventListener("scroll",d1Utilities.throttle(d1_globalHeader.toggleHeader,100));d1_globalHeader.dropdownEls.forEach(els=>{els.container.removeEventListener("mouseenter",function(){dropdownMouseenter(els)},false);els.container.addEventListener("mouseenter",function(){dropdownMouseenter(els)},false);els.container.removeEventListener("mouseleave",function(){dropdownMouseleave(els)},false);els.container.addEventListener("mouseleave",function(){dropdownMouseleave(els)},false);els.container.removeEventListener("click",function(){dropdownClick(els)},false);els.container.addEventListener("click",function(){dropdownClick(els)},false);});if(d1_globalHeader.menuExists){d1_globalHeader.menuButton.removeEventListener("click",menuButtonClick);d1_globalHeader.menuButton.addEventListener("click",menuButtonClick);}}}(window.d1_globalHeader=window.d1_globalHeader||{}));}catch(e){console.log('error in: themes/dataone/layouts/partials/blocks/nav/nav.js, error message:'+e)}