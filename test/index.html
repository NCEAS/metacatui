<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8"/>
        <title>MetacatUI Tests</title>
        <link rel="stylesheet" href="https://unpkg.com/mocha@9.2.2/mocha.css" />
    </head>
    <body>
        <div id="mocha"></div>
        <script type="text/javascript" src="https://unpkg.com/chai@4.3.6/chai.js"></script>
        <script type="text/javascript" src="https://unpkg.com/mocha@9.2.2/mocha.js"></script>
        <script type="text/javascript">
          var MetacatUI = {
            AppConfig: {
              root: "/src"
            }
          }
        </script>
        <script type="text/javascript" src="../src/loader.js"></script>
        <script class="mocha-init">
          mocha.setup('bdd');
          mocha.checkLeaks();
        </script>
        <script class="mocha-exec">
          window.onload = function(){
            //Load all the tests from the tests.json file
            console.log("Fetching test JSON file")
            fetch("tests.json")
              .then(response => response.json())
              .then(testList => {
                // Use RequireJS to load in the tests, because RequireJS will not be happy loading them in any other way
                require(testList.tests, function() {
                    mocha.run();
                });
              });
            }
       </script>
    </body>
</html>
